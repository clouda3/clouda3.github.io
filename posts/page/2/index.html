<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=generator content="Hugo 0.59.1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><title>top | 云端的blog</title><meta property="og:title" content="top - 云端的blog"><meta property="og:type" content="article"><meta property="article:published_time" content="2019-10-01T16:10:12&#43;08:00"><meta property="article:modified_time" content="2019-10-01T16:10:12&#43;08:00"><meta name=Keywords content><meta name=description content="top"><meta name=author content><meta property="og:url" content="https://clouda3.github.io/posts/"><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=stylesheet href=/css/normalize.css><link rel=stylesheet href=/css/style.css><link rel=alternate type=application/rss+xml+xml href=https://clouda3.github.io/posts/index.xml title=云端的blog><script type=text/javascript src=//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js></script></head><body><header id=header class=clearfix><div class=container><div class=col-group><div class=site-name><a id=logo href=https://clouda3.github.io/>云端的blog</a></div><div><nav id=nav-menu class=clearfix><a href=https://clouda3.github.io/>首页</a>
<a class=current href=https://clouda3.github.io/posts/ title=Blog>Blog</a>
<a href=https://clouda3.github.io/tags/ title=Tags>Tags</a>
<a href=https://clouda3.github.io/about title=About>About</a>
<a href=https://clouda3.github.io/index.xml title=RSS>RSS</a></nav></div></div></div></header><div id=body><div class=container><div class=col-group><div class=col-8 id=main><div class=res-cons><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/service-mesh/ title="什么是service mesh">什么是service mesh</a></h1></header><date class="post-meta meta-date">2023年11月23日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/paas>PAAS</a></span></div><div class=post-content>什么是service mesh Service Mesh又译作“服务网格”，作为服务间通信的基础设施层。Willian Morgan（Linkerd的CEO）如下定义Service Mesh。
Service Mesh 是一个基础设施层，用于处理服务间通信。云原生应用有着复杂的服务拓扑，Service Mesh 保证请求可以在这些拓扑中可靠地穿梭。在实际应用当中，Service Mesh 通常是由一系列轻量级的网络代理组成的，它们与应用程序部署在一起，但应用程序不需要知道它们的存在。
Service Mesh 实际上就是处于 TCP/IP 之上的一个抽象层，它假设底层的 L3/L4 网络能够点对点地传输字节（当然，它也假设网络环境是不可靠的，所以 Service Mesh 必须具备处理网络故障的能力）。
架构图 通过以上的架构图，很清晰的看到，最重要的两个部分就是control plane 和sidecar
Control Plane：控制平面是服务网格的集中管理和配置层。它负责控制和协调sidecar代理的行为。它提供了一个控制平面API，允许管理员配置流量管理、安全性和可观测性的策略、规则和设置。
Sidecar（旁车）：它基于Envoy代理。它是在同一Kubernetes POD中运行的另一个容器，负责处理所有的横切关注点。它基于旁车容器设计模式。•应用程序流量：微服务通过使用sidecar容器连接到其他微服务。应用程序流量基本上是Envoy sidecar代理容器之间的通信
Data Plane：数据平面指的是部署在每个服务实例旁边的一组sidecar代理组成的网络，用于与系统中的其他服务进行通信。它充当服务与网络的中间人。Sidecar代理处理入站和出站流量，拦截通信并提供其他功能。
Controllers：控制器是负责管理和控制网格行为的组件。它通常是一个软件组件，用于监视服务的状态和健康情况、配置流量路由和负载均衡规则、实施安全策略，并处理网格内服务之间通信的其他方面。
服务发现（Service Discovery）：服务发现是服务网格架构中的一个重要组件。它使得服务能够动态地定位和连接到彼此，而无需硬编码的地址。
证书授权机构（Certificate Authority）：它提供和管理根证书和中间证书，并执行证书签名操作。
应用程序微服务（Application Microservices）：这些是组成应用程序的各个服务或微服务。它们负责处理特定的功能或任务。
API端点（API Endpoints）：API端点是网格中的服务之间进行通信的入口点
方案 目前社区Service Mesh的开源解决方案有：Buoyant 公司推出的 Linkerd 和 Google、IBM 等厂商牵头的 Istio。Linkerd 更加成熟稳定些，Istio 功能更加丰富、设计上更为强大，社区相对也更加强大一些。
istio介绍 Istio是由Google、IBM和Lyft开源的微服务管理、保护和监控框架。Istio为希腊语，意思是”起航“。Istio是一个开源的服务网格平台，提供了一组工具和功能，用于管理和保护基于微服务的应用程序。它旨在解决复杂分布式系统中与服务之间通信、可观察性、安全性和流量管理相关的常见挑战。在其核心，Istio在应用程序中的每个微服务旁边部署一个称为Envoy的sidecar代理。这个sidecar代理拦截和管理服务的所有入站和出站流量，使得Istio可以控制和监控服务之间的通信。
优点：
Istio拥有庞大的在线服务网格社区，并且在互联网上备受赞誉和讨论。其GitHub的贡献者远远超过Linkerd，数量上占据优势。•此外，它支持Kubernetes和VM模式。
缺点：
Istio并非免费提供，使用它需要相当大的时间投入，包括阅读文档、设置、确保正常功能和持续维护。
在生产环境中实施和集成Istio可能需要几周甚至几个月的时间，这取决于基础架构的复杂性。 使用Istio需要相当大的资源开销。•与Linkerd不同，它缺乏内置的管理仪表板。 此外，Istio要求使用其自己的入口网关。 Istio控制平面仅在Kubernetes容器中受支持，没有可用于Istio数据平面的VM模式。……</div><p class=readmore><a href=https://clouda3.github.io/posts/service-mesh/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/why-openshift/ title=企业为什么选择使用openshift>企业为什么选择使用openshift</a></h1></header><date class="post-meta meta-date">2022年11月23日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/paas>PAAS</a></span></div><div class=post-content>什么是openshift OpenShift是红帽的云开发平台即服务（PaaS）。自由和开放源码的云计算平台使开发人员能够创建、测试和运行他们的应用程序，并且可以把它们部署到云中。OpenShift广泛支持多种编程语言和框架，如Java，Ruby和PHP等。另外它还提供了多种集成开发工具如Eclipse integration，JBoss Developer Studio和 Jenkins等。OpenShift 基于一个开源生态系统为移动应用，数据库服务等，提供支持。 OpenShift Online服务构建在Red Hat Enterprise Linux上。Red Hat Enterprise Linux提供集成应用程序，运行库和一个配置可伸缩的多用户单实例的操作系统，以满足企业级应用的各种需求。
架构图 核心的概念 https://zhuanlan.zhihu.com/p/635160126?utm_id=0
容器（Container） 镜像（Image） 用户（User） 项目（Project） 容器沙箱（Pod） 部署（Deployment） 服务（Service） 路由（Router） 持久化存储（Persistent Storage） 模板（Template） 构建（Build）和镜像流（ImageStream）
为什么要使用openshift OpenShift的持续集成和持续部署（CI/CD）功能可以帮助开发者快速地将代码更改合并到主分支，并通过自动化的方式将其部署到生产环境，这不仅可以提高开发效率，还可以减少人为错误，提高软件的质量。
OpenShift的多租户支持功能使得不同的团队或者公司可以在同一个平台上共享资源，而不需要担心数据安全问题，每个租户都可以拥有自己的独立的应用程序、服务和数据库，这样就可以满足不同团队的需求。
OpenShift的应用市场功能提供了一个方便的平台，让开发者可以找到并使用各种预先构建的应用程序和服务，而不需要自己从头开始编写，这样不仅可以节省时间，还可以提高开发效率。
OpenShift的自动扩展功能可以根据应用程序的负载情况自动调整资源的分配，以确保应用程序的性能和可用性，这样可以避免因为资源不足而导致的应用程序崩溃，也可以在需求增加时快速地扩展应用程序的能力。
OpenShift的优势在于其简单易用、功能强大和灵活可扩展的特性，它可以帮助开发者快速地部署和管理应用程序，提高开发效率，降低运维成本。……</div><p class=readmore><a href=https://clouda3.github.io/posts/why-openshift/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/oauth2.0/ title=Oauth2.0>Oauth2.0</a></h1></header><date class="post-meta meta-date">2022年10月23日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/security>Security</a></span></div><div class=post-content>what is oauth2.0 OAuth 2.0, which stands for “Open Authorization”, is a standard designed to allow a website or application to access resources hosted by other web apps on behalf of a user. It replaced OAuth 1.0 in 2012 and is now the d industry standard for online authorization. OAuth 2.0 provides consented access and restricts actions of what the client app can perform on resources on behalf of the user, without ever sharing the user&rsquo;s credentials.……</div><p class=readmore><a href=https://clouda3.github.io/posts/oauth2.0/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/devops-traning-slide/ title="Devops traning">Devops traning</a></h1></header><date class="post-meta meta-date">2022年6月17日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/devops>devops</a></span></div><div class=post-content>Devops DevOps is a set of practices that combines software development (Dev) and IT operations (Ops). It aims to shorten the systems development life cycle and provide continuous delivery with high software quality.DevOps is complementary with Agile software development;
CI/CD is a best practice for devops and agile development. CI/CD bridges the gaps between development and operation activities and teams by enforcing automation in building, testing and deployment of applications.……</div><p class=readmore><a href=https://clouda3.github.io/posts/devops-traning-slide/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/architect-design-principle/ title="architect design principle">architect design principle</a></h1></header><date class="post-meta meta-date">2022年6月15日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/architect>architect</a></span></div><div class=post-content>Architect design principle Techinical part Scaling workload Building resilient architecture Design for performance Loose coupling Data-driven design Security everywhere Automating everything Function part Design for compliance Design for operation Design for System monitoring Methodology part Design for agile dev Design for agile devops ……</div><p class=readmore><a href=https://clouda3.github.io/posts/architect-design-principle/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/enterprise-arichitect-solution-arichitect-technical-architect-difference/ title="enterprise atchitect/solution architect/technical architect difference">enterprise atchitect/solution architect/technical architect difference</a></h1></header><date class="post-meta meta-date">2022年6月10日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/architect>architect</a></span></div><div class=post-content>Architect Different architect Enterprise Architect
play a key role when it comes to identifying business needs in context with external factors like competitors and internal factors like a company’s IT landscape.
Solution Architect
focused on details and solution technologies to address a specific business problem, it provides a channel between enterprise architecture and technical architecture
Techinical Architect
focused more on designing and implementing technical solutions.
……</div><p class=readmore><a href=https://clouda3.github.io/posts/enterprise-arichitect-solution-arichitect-technical-architect-difference/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/linux-tmpfiles-clean/ title="linux 临时文件的管理">linux 临时文件的管理</a></h1></header><date class="post-meta meta-date">2022年5月7日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>Centos临时目录的系统管理 Linux产生大量的临时文件和目录，例如/tmp、/run 。RHEL7或者CentOS7中，systemd提供了一个结构化的可配置方法来管理临时文件和目录，即systemd-tmpfiles，可以创建、删除和管理临时文件的服务。旧版本系统使用watchtmp+cron来共同实现管理临时文件。
systemd启动后，其中一个启动的服务单元是systemd-tmpfiles-setup，该服务的命令为:systemd-tmpfiles &ndash;creat/&ndash;clean *conf , *conf是可选的，不写默认是使用所有配置文件
配置文件，优先级从上到下。 /etc/tmpfiles.d/*conf ，管理员可修改的配置文件 /run/tmpfiles.d/*conf ，daemon应用程序自己管理的配置文件，不建议更改 /usr/lib/tmpfiles.d/*conf，rpm软件安装时，自动更新的配置文件，不能更改 定期清理timer systemd定时器单元会按固定间隔调用systemd-tmpfiles --clean 。 systemctl status systemd-tmpfiles-clean.timer 查看timer状态。 systemctl cat systemd-tmpfiles-clean.timer 查看timer具体内容，也可以进入/usr/lib/systemd/system目录后使用more systemd-tmpfiles-clean.timer 来查看。 从timer具体内容可以知道系统启动15分钟后和每天会运行一次systemd-tmpfiles --clean.那么timer定时运行的是哪些服务呢？ 是在systemd-tmpfiles-clean.service里面定义的： systemctl cat systemd-tmpfiles-clean.service可以查看。 ……</div><p class=readmore><a href=https://clouda3.github.io/posts/linux-tmpfiles-clean/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-best-practise-financial/ title=把最近一些东西aws东西画出来>把最近一些东西aws东西画出来</a></h1></header><date class="post-meta meta-date">2022年4月26日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cdk>cdk</a></span></div><div class=post-content>……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-best-practise-financial/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/centos-8-maintenance-stopped/ title="Centos 8維護已經停止了">Centos 8維護已經停止了</a></h1></header><date class="post-meta meta-date">2022年2月15日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/centos>centos</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>Centos 8 維護已經停止了 年前安裝了centos8.2 yum 的repo還是用的默認的，一切都正常,昨天在新的服務器上發現yum的repo已經無法使用了，我當時就意識到應該維護停止了，馬上去網上查一下，果然如此，如果想繼續使用請替換掉原來的mirror，使用centos-vault，https://mirrors.aliyun.com/centos-vault/ 或者 https://vault.centos.org/8.2.2004/ Centos 7 的維護還是會繼續到2024年 CentOS yes Community Enterprise Operating System（ Community enterprise operating system ） An acronym for , yes 100％ Reconstructed RHEL（ Red Hat Enterprise Linux）. Even though RHEL It costs money , but CentOS It's free. , Community supported businesses Linux Distribution version . Good at Linux And don't want to pay RHEL Support fee developers and companies always choose CentOS To save money and get enterprise software .……</div><p class=readmore><a href=https://clouda3.github.io/posts/centos-8-maintenance-stopped/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/jwt/ title=JWT>JWT</a></h1></header><date class="post-meta meta-date">2021年12月3日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/token>Token</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/security>Security</a></span></div><div class=post-content>what is jwt JSON Web Tokens are an open, industry standard RFC 7519 method for representing claims securely between two parties.
jwt structure A well-formed JWT consists of three concatenated Base64url-encoded strings, separated by dots (.):
JOSE Header: contains metadata about the type of token and the cryptographic algorithms used to secure its contents.
JWS payload (set of claims): contains verifiable security statements, such as the identity of the user and the permissions they are allowed.……</div><p class=readmore><a href=https://clouda3.github.io/posts/jwt/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/polygon-websoket-data-transfer-issue/ title=Polygon在websoket的连接串数据的经常中断>Polygon在websoket的连接串数据的经常中断</a></h1></header><date class="post-meta meta-date">2021年11月20日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/polygon>polygon</a></span></div><div class=post-content>本来使用工具或者服务 Pologon 美股数据供应商 Kafka Nettty Centos8.2 架构图 架构说明 Polygon是美股的数据供应商,提供美股tick级别的数据服务 美股开盘数据非常的大，平时可以达到6M/秒的传输速度，也就是说可以达到每秒6万条数据的传输速度 数据的传输是基于internet的传输，所以要保障数据在互联网上的快速传输必须基于长连接来实现，因此polygon提供了websocket服务 我们的app收到polygon websocket推送过来的数据要进行简单的解析和格式转换，然后发送到本地的kafka cluster中间件用来分发数据，给其他的应用来做大数据处理包括flink等大数据中间件 出现的问题 Polygon数据传输出现了频繁的中断1：Slow consumer slow consumer:https://polygon.io/docs/stocks/ws_getting-started 查看了一下polygon的技術文檔: if a client is consuming messages too slowly for too long, Polygon.io&rsquo;s server-side buffer may get too large. If that happens, Polygon.io will terminate the WebSocket connection. You can check your account dashboard to see if a connection was terminated as a slow consumer. If this happens to you consistently, consider subscribing to fewer symbols or channels.……</div><p class=readmore><a href=https://clouda3.github.io/posts/polygon-websoket-data-transfer-issue/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/application-network-issue-caused-thread-block/ title=交换机故障导致线程阻塞>交换机故障导致线程阻塞</a></h1></header><date class="post-meta meta-date">2021年8月21日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/architect>architect</a></span></div><div class=post-content>本来使用工具或者服务 Jconsole Jstack prometheus 架构图 架构说明 This is an internal application (Not cloud) architect,we have big network traffic and lots of application ,we deploy in our own server
we have a RabbitMQ server (which our data provider will send HKEX data to this server)
we have an Application will consume the messages from MQ
Our application will process the data and sending to Kafka and Elastic search……</div><p class=readmore><a href=https://clouda3.github.io/posts/application-network-issue-caused-thread-block/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/alicloud_privatelink/ title=阿里云架构-使用privatelink让不同的vpc的服务可以访问>阿里云架构-使用privatelink让不同的vpc的服务可以访问</a></h1></header><date class="post-meta meta-date">2021年7月28日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/alicloud>Alicloud</a></span></div><div class=post-content>本来使用工具或者服务 Alicloud vpc SLB PrivateLink endpoit zone and service ECS 架构图 架构说明 对于两个网络（VPC-A，VPC-B）的ECS提供的服务，要是A访问B，可以提供以下方案
B通过EIP或者IP或者绑定SLB，通过SLB的IP把B的服务暴露在公网上 A网络和B网络互联 通过privatelink来单向向让A网络的访问B网络的服务 分析上面优缺点
安全性不好，把服务暴露在公网 A和B网络直接互联创建路由成本太高，第二就是可能会造成网络冲突 通过privatelink私有网络连接成本低廉，单向的内网服务，不改变各自的网络配置 Privatelink 如何创建privatelink服务
privatelind endpoint service：需要关联一个SLB，此slb必须支持privatelink的SLB，slb后面就是ECS或者其他的rds等都可以
privatelink endpoint 创建的是时候需要跟endpoint service 连接 一旦创建并且链接成功，那么privatelink就可以生效了
privatelink endpoint 有一个DNS地址，我们可以通过地址直接访问，此地址是aliyun内网地址
……</div><p class=readmore><a href=https://clouda3.github.io/posts/alicloud_privatelink/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/point-to-point-network-transfer-speed-test/ title=網絡服務器點對點的網速測試>網絡服務器點對點的網速測試</a></h1></header><date class="post-meta meta-date">2021年6月2日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>Linux</a></span></div><div class=post-content>本文简介 我們跟數據供應商之間數據傳輸一直存在很多的問題，我們的網絡經過測速后非常的快，供應商也反復說他們的網速也非常快，那麽問題來了?既然大家都快，是不是在某個路由環節之間出現了問題呢? iperf 簡介 iperf是一种命令行工具，用于通过测量服务器之間可以处理的最大网络吞吐量来诊断网络速度问题。 iperf信息 iperf版本： iperf 3.1.3 官网地址： https://iperf.fr 安裝和運行 server
rpm -ivh https://iperf.fr/download/fedora/iperf3-3.1.3-1.fc24.x86_64.rpm iperf3 -s client
rpm -ivh https://iperf.fr/download/fedora/iperf3-3.1.3-1.fc24.x86_64.rpm iperf3 -c serverip -p 5201 運行結果 [root@PC-231 ~]# iperf3 -c 172.16.10.101 -p 5201 Connecting to host 172.16.10.101, port 5201 [ 4] local 192.168.25.231 port 59398 connected to 172.16.10.101 port 5201 [ ID] Interval Transfer Bandwidth Retr Cwnd [ 4] 0.……</div><p class=readmore><a href=https://clouda3.github.io/posts/point-to-point-network-transfer-speed-test/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-cdk/ title="aws cdk introduction">aws cdk introduction</a></h1></header><date class="post-meta meta-date">2021年2月26日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cdk>cdk</a></span></div><div class=post-content>What is the AWS CDK? The AWS Cloud Development Kit (CDK) ,a framework for defining cloud infrastructure in code and provisioning it through AWS CloudFormation.
CDK stack How does CDK work Build with high-level constructs that automatically provide sensible, secure defaults for your AWS resources, defining more infrastructure with less code. Use programming idioms like parameters, conditionals, loops, composition, and inheritance to model your system design from building blocks provided by AWS and others.……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-cdk/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/local-datacenter-vs-cloud/ title=本地数据中心和云的对比>本地数据中心和云的对比</a></h1></header><date class="post-meta meta-date">2021年2月2日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>本文简介 本来主要介绍云和本地的数据中心的对比，主要用阿里云来对比，作为aws和alicloud的认证工程师，我对云上的和自有数据中心架构系统做个详细的对比，本文，仅仅用alicloud 本系统简介 本系统主要是做美股和港股的数据处理，美股数据来源是polygon（基于websocket数据推送和restful查询api）,港股的数据来源是港交所（UDP广播）
本系统功能：接收美股和港股的数据，并作本地的消息存储，用消息中间件来存储交易所数据，然用以一部分数据用来做大数据实时计算，一部数据用来做持久化的存储
本系统的架构图 本系統本地使用硬件 軟件 狀態 服務器 數量 存儲 數量 Kafka cluster centos8.2 5 ssd 4 raid5 Elatic search cluster centos8.2 3 ssd 4 raid5 Flink cluster centos8.2 3 ssd 4 raid5 Polygon subscriber single centos8.2 1 ssd 4 raid5 APP single centos8.2 1 ssd 4 raid5 本地數據中心存在的主要問題 硬件的問題 1.……</div><p class=readmore><a href=https://clouda3.github.io/posts/local-datacenter-vs-cloud/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/kafka-cluster-setup/ title="kafka cluster的搭建">kafka cluster的搭建</a></h1></header><date class="post-meta meta-date">2020年7月30日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/kafka>kafka</a></span></div><div class=post-content>本文使用工具或者服务 Java 8 https://archive.apache.org/dist/kafka/3.0.0/kafka_2.13-3.0.0.tgz https://www.apache.org/dyn/closer.lua/zookeeper/zookeeper-3.7.0/apache-zookeeper-3.7.0-bin.tar.gz Centos8.2 Zookeeper 簡介 ZooKeeper是一个分布式协调服务，它的主要作用是为分布式系统提供一致性服务，提供的功能包括：配置维护、命名服务、分布式同步、组服务等。Kafka的运行依赖ZooKeeper。 Broker注册 Topic注册 生产者负载均衡 消费者负载均衡 消费者注册 Kafka 簡介 Kafka是由Apache软件基金会开发的一个开源流处理平台，由Scala和Java编写。Kafka是一种高吞吐量的分布式发布订阅消息系统，它可以处理消费者在网站中的所有动作流数据。 Kafka 是一种高吞吐量的分布式发布订阅消息系统，有如下特性： 通过O(1)的磁盘数据结构提供消息的持久化，这种结构对于即使数以TB的消息存储也能够保持长时间的稳定性能。 高吞吐量 即使是非常普通的硬件Kafka也可以支持每秒数百万的消息。 支持通过Kafka服务器和消费机集群来分区消息。 zookeeper 與kafka之間的關係 ZooKeeper用于分布式系统的协调，Kafka使用ZooKeeper也是基于相同的原因。ZooKeeper主要用来协调Kafka的各个broker，不仅可以实现broker的负载均衡，而且当增加了broker或者某个broker故障了，ZooKeeper将会通知生产者和消费者，这样可以保证整个系统正常运转。 安裝zooker和kafka 之前首先要做系統的優化和配置 文件句柄數的調整 oracle Jre8 安裝 磁盤的分區和挂載點必須滿足kafka大數量的存儲xfs分區 關閉selinux 防火墻暫時關閉(後面看可以統一規劃端口) 創建非root的kafka管理用戶並添加sudoer權限 注意事項 kafka是一個分佈式的消息系統，我們會臨時存儲消息，如果存儲消息的時間長，那麽需要大空間，所以分區的時候已經要注意，就是安裝kafka的時候存儲一定要挂載到大的硬盤空間上 Zookeeper 配置 # The number of milliseconds of each tick tickTime=2000 # The number of ticks that the initial # synchronization phase can take initLimit=10 # The number of ticks that can pass between # sending a request and getting an acknowledgement syncLimit=5 # the directory where the snapshot is stored.……</div><p class=readmore><a href=https://clouda3.github.io/posts/kafka-cluster-setup/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/alicloud-terraform-create-ecs-ansible-provision/ title=使用terraform创建阿里ecs用ansible完成主机配置>使用terraform创建阿里ecs用ansible完成主机配置</a></h1></header><date class="post-meta meta-date">2020年5月29日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/ansible>ansible</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/terraform>terraform</a></span></div><div class=post-content>使用terraform创建ecs用ansible完成ecs的provision 本文目标就是是用terraform创建ecs包括security group,disk,vpc,vswtich,然后用ansible来初始化和配置创建好的ecs 本文只是创建了一个单机ecs，后续的文章会有load balance出现 terrorm 创建ecs 什么是terraform terraform是云工具，也就是针对云平台的 terraform是在云平台上管理资源的，就是一个云资源编排工具 terraform目标是&rdquo;Write, Plan, and create Infrastructure as Code&rdquo;, 基础架构即代码。具体的说就是可以用代码来管理维护 IT 资源，把之前需要手动操作的一部分任务通过程序来自动化的完成，这样的做的结果非常明显：高效、不易出错。 Terraform 核心功能
基础架构即代码(Infrastructure as Code) 执行计划(Execution Plans) 资源图(Resource Graph) 自动化变更(Change Automation) terraform安装
下载https://www.terraform.io/downloads.html 设置环境变量（省略） 创建terraform 配置文件
main.tf
provider &quot;alicloud&quot; { access_key = &quot;xxx&quot; secret_key = &quot;xxx&quot; region = &quot;ap-southeast-1&quot; #version = &quot;~&gt; 1.5.0&quot; } data &quot;alicloud_instance_types&quot; &quot;instance_type&quot; { instance_type_family = &quot;ecs.……</div><p class=readmore><a href=https://clouda3.github.io/posts/alicloud-terraform-create-ecs-ansible-provision/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/ansible-deploy-docker-container/ title=使用ansible在多台客户机安装docker>使用ansible在多台客户机安装docker</a></h1></header><date class="post-meta meta-date">2020年5月22日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/ansible>ansible</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/docker>docker</a></span></div><div class=post-content>Install ansible on server Ansible是一个开源配置管理工具，可以使用它来自动化任务，部署应用程序实现IT基础架构。Ansible可以用来自动化日常任务，比如，服务器的初始化配置、安全基线配置、更新和打补丁系统，安装软件包等 Ansible包括控制节点（Control node）也叫主机，受控节点（Managed nodes）也叫客户机,只在控制节点安装就好了 ansible 优点 只需要在主机上安装ansible软件，客户机不需要安装 通讯协议SSH协议和SFTP 可并行执行程序，默认情况下，forks值为5，可以按需，在配置文件中增大该值 ansible(centos)安装和配置 yum install ansible
为了使Ansible与客户端通信，需要使用用户帐户配置管理机和客户机。为了方便快捷安全，一般会配置证书方式连接客户机
ssh-keygen ssh-copy-id ansible@node ip 使用ad-hoc 在客户执行命令，相当于命令行 /etc/ansible/hosts,最好谨慎使用hosts配置，安全问题需要解决
[docker] 192.168.25.173 ansible_ssh_port=22 ansible_ssh_user=root ansible_ssh_pass=&quot;xxx&quot; 执行以下ping,命令里面的docker对应的上面文件的docker
ansible docker -m ping 使用ad-hoc命令管理软件包,安装
ansible docker -m yum -a &quot;name=docker state=present&quot; -b 使用ad-hoc命令管理软件包,设置默认启动
ansible docker -b -m service -a &quot;name=docker enabled=yes&quot; 使用ad-hoc命令管理软件包,启动
ansible docker -b -m service -a &quot;name=httpd state=started&quot; 使用ansible-playbook 部署docker test-ansile.……</div><p class=readmore><a href=https://clouda3.github.io/posts/ansible-deploy-docker-container/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/linux-cerbot/ title=给nginx安装免费的证书>给nginx安装免费的证书</a></h1></header><date class="post-meta meta-date">2020年5月8日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>https vs http https比http安全原因是传输的过程中使用了加密，因为https在服务器端使用证书 证书的认证需要认证机构，随便一个https的证书阿里巴巴云最便宜的一年要2000多，aws更是贵到天上，所以对于个人程序员来来说最好有免费的证书 cerbot就是你的选择 cerbot简介 cerbot就是Electronic Frontier Foundation (EFF)这个机构给大家发的福利，简单的一句话来说就是给你提供3个月的免费证书，证书到期后继续免费续约，个人网站是用最方便，每三个月更新一次就可以了 cerbot 使用 cerbot 安装脚本
yum -y install yum-utils yum-config-manager --enable rhui-REGION-rhel-server-extras rhui-REGION-rhel-server-optional sudo yum install certbot python2-certbot-nginx sudo certbot --nginx(sudo certbot certonly --nginx) echo &quot;0 0,12 * * * root python -c 'import random; import time; time.sleep(random.random() * 3600)' &amp;&amp; certbot renew -q&quot; | sudo tee -a /etc/crontab &gt; /dev/null (auto renewal) cerbot 证书验证 To confirm that your site is set up properly, visit https://yourwebsite.……</div><p class=readmore><a href=https://clouda3.github.io/posts/linux-cerbot/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/vagrant-windows-template/ title=vagrant使用介绍>vagrant使用介绍</a></h1></header><date class="post-meta meta-date">2020年4月22日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/vagrant>vagrant</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/vm>vm</a></span></div><div class=post-content>vagrant 简介 VirtualBox 是一款开源虚拟机软件,vagrant是一个基于Ruby的工具，用于创建和部署虚拟化开发环境。它使用Oracle的开源VirtualBox虚拟化系统，使用Chef创建自动化虚拟环境。 BBC Vagrant 是基于VirtualBox创建的虚拟机，并通过Vagrant进行打包而得到的VM环境。在虚拟机中部署好开发环境并建立虚拟机和实体机的文件共享，在开发时，可以通过实体机进行文件修改，并经过虚拟机中的环境执行，从而实现不同操作系统的工作环境的轻松部署。
安装 vagrant和virtualbox 下载并安装VirtualBox（ https://www.virtualbox.org/wiki/Downloads ）。
VirtualBox 4.3.12下载地址(windows请用此链接)：http://dlc-cdn.sun.com/virtualbox/4.3.12/index.html
下载并安装Vagrant（ http://www.vagrantup.com/downloads.html ）。
安装和定制box 下载windows 10 box文件。 https://app.vagrantup.com/mrlesmithjr/boxes/windows10/versions/1574780096/providers/virtualbox.box 到c:\vagrant\download
执行命令
vagrant box add win10 c:\vagrant\download\virtualbox.box cd c:\vagrant vagrant init win10 vagrant up 2&gt; vagrant.log 查看模板文件c:\vagrant\Vagrantfile
$script = &lt;&lt;-'SCRIPT' echo &quot;starting wechat&quot; ipconfig &gt; c:\ip.log C:\Users\wechat\WeChat.exe &gt; c:\wechat.log netstat &gt; c:\netstat.log echo &quot;started wechat&quot; SCRIPT Vagrant.……</div><p class=readmore><a href=https://clouda3.github.io/posts/vagrant-windows-template/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/hugo-advanced-level-lesson/ title=手把手使用Hugo搭建网站-高级篇>手把手使用Hugo搭建网站-高级篇</a></h1></header><date class="post-meta meta-date">2019年11月26日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/gohugo>gohugo</a></span></div><div class=post-content>1.3. 手把手使用hugo搭建网站高级篇
1.3.1. 創建页面的目錄 hugo提供了目錄的支持table of content
創建目錄首先你的文章必須有標題 在layouts/_default/single.html 添加代碼 {{.TableOfContents}}
{{ define &quot;main&quot; -}} &lt;div class=&quot;post&quot;&gt; &lt;h1&gt;{{ .Title }}&lt;/h1&gt; &lt;time datetime={{ .Date.Format &quot;2006-01-02T15:04:05Z0700&quot; }} class=&quot;post-date&quot;&gt;{{ .Date.Format &quot;Mon, Jan 2, 2006&quot; }}&lt;/time&gt; {{.TableOfContents}} {{ .Content }} &lt;/div&gt; {{ if .Site.DisqusShortname -}} &lt;h2&gt;Comments&lt;/h2&gt; {{ template &quot;_internal/disqus.html&quot; . }} {{- end }} {{ partial &quot;related.html&quot; . }} {{- end }}
1.3.2. 创建搜索 伪站内搜索 使用google cse……</div><p class=readmore><a href=https://clouda3.github.io/posts/hugo-advanced-level-lesson/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/hugo-medium-level-lesson/ title=手把手使用Hugo搭建网站-中级篇>手把手使用Hugo搭建网站-中级篇</a></h1></header><date class="post-meta meta-date">2019年11月26日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/gohugo>gohugo</a></span></div><div class=post-content>1.2. 手把手使用hugo搭建网站进阶篇
1.2.1. 自定义菜单 配置定义菜单栏
layouts/partials/sidebar.html
&lt;aside class=&quot;sidebar&quot;&gt; &lt;div class=&quot;container sidebar-sticky&quot;&gt; &lt;div class=&quot;sidebar-about&quot;&gt; &lt;a href=&quot;{{ .Site.BaseURL }}&quot;&gt;&lt;h1&gt;{{ .Site.Title }}&lt;/h1&gt;&lt;/a&gt; &lt;p class=&quot;lead&quot;&gt; {{ with .Site.Params.description }} {{.}} {{ else }}{{end}} &lt;/p&gt; &lt;/div&gt; &lt;nav&gt; &lt;ul class=&quot;sidebar-nav&quot;&gt; {{ $currentPage := . }} {{ range .Site.Menus.main -}} &lt;li&gt; &lt;a class=&quot;sidebar-nav-item{{if or ($currentPage.IsMenuCurrent &quot;main&quot; .) ($currentPage.HasMenuCurrent &quot;main&quot; .) }} active{{end}}&quot; href=&quot;{{ .URL }}&quot; title=&quot;{{ .Title }}&quot;&gt;{{ .Name }}&lt;/a&gt; &lt;/li&gt; {{- end }} &lt;/ul&gt; &lt;ul class=&quot;sidebar-nav&quot;&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;/ul&gt; &lt;/nav&gt; &lt;p&gt;{{ with .……</div><p class=readmore><a href=https://clouda3.github.io/posts/hugo-medium-level-lesson/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/hugo-entry-level-lesson/ title=手把手使用Hugo搭建网站-初级篇>手把手使用Hugo搭建网站-初级篇</a></h1></header><date class="post-meta meta-date">2019年11月26日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/gohugo>gohugo</a></span></div><div class=post-content>1.1. 手把手使用hugo搭建网站初级篇
1.1.1. Demo使用hugo的网站 https://www.flysnow.org/ https://www.gohugo.io https://www.netlify.com/ https://gohugo.io/showcase/ https://www.smashingmagazine.com/
1.1.2. 部分主题 https://github.com/Vimux/Mainroad https://github.com/kingfsen/Mainroad https://themes.gohugo.io/academic/ https://themes.gohugo.io/beautifulhugo/ https://themes.gohugo.io/hyde/ https://themes.gohugo.io/hugo-theme-even/ https://github.com/rujews/maupassant-hugo
1.1.3. hugo跟wordpress其他建站工具的对比 wordpress 全球31%的网站使用wordpress，尽管他有各种主题和插件，但是也有非常多的缺点，安全性，seo不够友好，定制麻烦 hugo 最快的静态生成工具,seo友好，静态更安全，方便定制模板，缺点没有插件，如果要定制模板只能懂一点go的语法 wordpress是动态的并且还需要托管数据库，所以托管费用比较昂贵 hugo是生成静态的页面，在本地生成后上传到服务器就可以了，托管费用非常便宜，可以直接用免费的github托管 hugo不可以在线编辑
wordpress vs hugo
Tables 静态/动态 托管 安全性 访问速度 在线编辑 markdown wordpress 动态 复杂 需要经常升级 快 可以 不支持 hugo 静态 简单 不需要打补丁 非常快 不可以 支持……</div><p class=readmore><a href=https://clouda3.github.io/posts/hugo-entry-level-lesson/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-saa-pass/ title=SAA-CO1考试之路>SAA-CO1考试之路</a></h1></header><date class="post-meta meta-date">2019年10月3日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>考试心得 考试成绩 852 背景 工作用到aws不到1年 有多年java开发经验 linux管理员,持有RHCE 准备周期 3周從準備到考試 每天8-12小时 做过实验的知识点列表 VPN endpoint/nat gateway/internet gateway/vpn/subnet/ACL RDS/Aurora/Reshift/Aurora/DynamoDB (snaphost copy az or cross region,ebs type change ,autoscaling ,entryption ,backup/replica ,Multi A-z,read/write unit)
Cloudfront (OAI,SSL certificat ,validation TTL ,pre-signed URL)
S3 (static websit ,ACL ,bucket policy,lifecyle)
ec2 (Cloudwath agent install,ebs mount/unmount,snapshot,elasticip binding)
Cloud53 (A/alias .routing policy)
Athena on S3 SQL QUERY……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-saa-pass/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-sap-passed/ title="aws sap passed">aws sap passed</a></h1></header><date class="post-meta meta-date">2019年10月2日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>9.27 号考试通过了SAP（913分），心里终于落下一块石头.从开始准备到最后通过我用了数个星期的时间，平均每天超过10小时的准备.sap的难度比saa高不是一个级别的，涉及了大量的新的知识点.不仅仅需要知道每个知识点，还需要动手去实践，为此我写了20个几个blog都是尝试这里面的知识点，实际我做过的实验大概有40多个，几乎每天要做一个实验，因为时间的问题，没有把其他的整理到blog上来，也是一个遗憾，后面我会慢慢补充上来。 考前准备 aws 账号 ：做实验用 最好有一些linux/network/dev experience 最好熟悉一门编程语言,java/.net/python/ruby/go/nodejs 最好熟悉json/yaml 如果考过saa最好了，saa是非常基础的aws认证 如果考过saa，最好保证300小时以上的学习时间 考试内容准备 印度小哥的一个考试心得基本上面面俱到了 https://www.linkedin.com/pulse/preparing-aws-certified-solutions-architect-2019-sap-c01-agarwal/ bilibili 上印度小哥sap视频 https://www.bilibili.com/video/av66737718?from=search&amp;seid=1011549087963751322 如果听的懂建议听听
bilibili 上cloud guru的sap视频 https://www.bilibili.com/video/av39285864?from=search&amp;seid=1657200592137432769
aws 本上的get-started https://aws.amazon.com/getting-started/ 建议尝试里面大部分的实验内容，只有实验的多了才能够理解每个服务以及服务于服务之间的关联
……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-sap-passed/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/ title=top>top</a></h1></header><date class="post-meta meta-date">2019年10月1日</date><div class=post-content>……</div><p class=readmore><a href=https://clouda3.github.io/posts/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-x-ray/ title="aws x-ray">aws x-ray</a></h1></header><date class="post-meta meta-date">2019年9月12日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>AWS X-Ray 可以帮助开发人员分析与调试分布式生产应用程序，例如使用微服务架构构建的应用程序。借助 X-Ray，您可以了解应用程序及其底层服务的执行方式，从而识别和排查导致性能问题和错误的根本原因。X-Ray 可在请求通过应用程序时提供请求的端到端视图，并展示应用程序底层组件的映射。您可以使用 X-Ray 分析开发和生产中的应用程序，从简单的三层应用程序到包含上千种服务的复杂微服务应用程序。
簡單來說，xray是用來追踪服務與服務之間鏈條，每個服務之間的請求內容，時間，參數等信息
用api-gateway 和 lambda 實驗 本文用到的例子是前面的博文: Aws cloudformation deploy lambda and apigateway 只需要額外做以下兩步 開啟api-gateway的x-ray,api gateway console-&gt; apis-&gt;spring-boot-lambda-&gt;stages-&gt;Prod-&gt;logs/tracing-&gt;enable x-ray tracing 開啟lambda的x-ray,functions-&gt;spring-boot-lambda-LambdaSpringBootFunction-7CK2QHXPRA6F-&gt;aws x-ray:active tracing
test x-ray:fire a request to api gateway
open x-ray console:service map:you will see a picture like below:
……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-x-ray/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-migration/ title="accelerating aws migration">accelerating aws migration</a></h1></header><date class="post-meta meta-date">2019年9月10日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>aws migration from OP to cloud這是aws最注重的部分，關於遷移技術，aws提供了各種各樣的工具，比如遷移數據庫(sts,dms),遷移workload（aws server migration service）,協助你計劃遷移收集信息的工具(aws application discovery service),track遷移進程的工具(migration hub),遷移海量數據的aws snowball or snowmobile,s3 acceleration, 加速數據傳輸的 dierct connect等等，從網絡到數據庫到文件，給你武裝到牙齒
以下是兩篇關於數據遷移的好文
https://medium.com/@awsontop/aws-cloud-migration-strategy-and-process-6ed38479735a
https://www.slideshare.net/AmazonWebServices/accelerating-your-portfolio-migration-to-aws-using-aws-migration-hub-ent321-reinvent-2017
……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-migration/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-glue-athena-quicksight/ title="aws online analytical processing (or OLAP)">aws online analytical processing (or OLAP)</a></h1></header><date class="post-meta meta-date">2019年9月10日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>OLAP在線分析工具越來越來成熟，從開始的數據倉庫，到強大的elk，再到雲，比如aws的 gaq(glue-athena-quicksight)，當然aws也有elk在線服務
gaq vs elk,實際上是一類的產品，glue提供了crawler去爬去數據，類似 logstash，athena提供查詢工具類似elasticsearch ,quicksight 跟 kibana一樣ui.gaq是aws雲端的服務，沒有辦法部署在線下，elk既可以部署在op也可以部署在cloud上
這篇文章來自 https://medium.com/localz-engineering/serverless-big-data-start-here-aws-glue-athena-quicksite-4c70ecac9fe3
有一個圖片 實驗 cloudwatch agent 或者 application discovery agent 到ec2
cloud watch agent 或者 discovery agent sync log 到 s3
glue裡面創建crawler ，指定s3
glue裡面創建database 和table
athena 寫sql語句查詢想要的數據
如果想要類似kinana那樣可視化的工具，那麼需要付費quicksight
完
……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-glue-athena-quicksight/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-difference-between-userpool-and-identitypool/ title="Difference between user pool and identity pool(Federated Identities)">Difference between user pool and identity pool(Federated Identities)</a></h1></header><date class="post-meta meta-date">2019年9月6日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>剛開始使用cognito服務的時候特別讓人困惑，有user pool 和 identity pool(Federated Identities)，user pool裡面還有federation，federation裡面有identity provider. identity pool 裡面有autenticated provider裡面也有user pool ID! 納尼?這是什麼鬼? let&rsquo;s forget the connection between them user pool 簡單來說就是提供一個用戶驗證的服務，比如用戶自定義用戶，用fb,GOOGLE，twitter等賬戶登錄，登錄後獲取一個token，用戶的每次請求帶著這個token就可以了，用戶登錄後獲取的是你個人應用的resource! ,比如你自己做了一個網站，登錄後可以管理自己用戶，權限，圖片等等，你有權限去訪問這些資源 identity pool 也是提供一個用戶認證的服務，用戶可以在裡面設置aws 的role，也就說用戶登錄後得到的aws的resource 的訪問權限，比如你可以訪問s3.只是這個登錄可以跟 user pool提供的服務去綁定，也可以不用user pool的服務直接用 identity pool裡面的provider去對接，也就說，如果你有google的id也可以登錄後獲取aws resource 資源的訪問權限，這個是登錄後aws通過sts生成臨時credential 來做到的 summary user pool 只是負責authentication，沒有authorization，即便有也是用戶本身應用的服務 identity pool，既可以authentication，又可以authoriztion，授權的是aws的resource 上幾張圖 幾個非常有價值的link https://serverless-stack.com/chapters/cognito-user-pool-vs-identity-pool.html https://gorillalogic.com/blog/java-integration-with-amazon-cognito/……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-difference-between-userpool-and-identitypool/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-cognito-sample/ title="Aws cognito sample">Aws cognito sample</a></h1></header><date class="post-meta meta-date">2019年9月6日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>这是一个aws官方的文档，我认为最好的cognito的例子，如果理解这个sample，那么cognito就没有任何问题 https://aws.amazon.com/getting-started/projects/build-serverless-web-app-lambda-apigateway-s3-dynamodb-cognito/ 详解 廢話少說直接上圖 程序組成部分 - 靜態的代碼存放s3 - 動態的代碼存放lambda - 代碼的訪問入口通過api-gateway - 數據的存放時dynamoDB(程序登錄後有個點擊頁面位置生成的數據,與用戶驗證沒有太多關係) Cognito user pool 在user login 流程 - 用戶用用戶名+密碼(或mfa，這取決於cognito user pool的配置)請求登錄 - aws cognito user pool去驗證用戶 - 如果用戶通過驗證返回一個token - 下一次用戶用這個token來請求訪問 - aws cognito user pool 可以基本满足用户登录，如果涉及到权限可以跟自己数据进行绑定 - 这个例子里面特别要注意的是，api gateway 直接设置了 Authorizers ：里面可以指定cognito 来对用戶進行驗證，不用額外寫程序來驗證，也就說每次訪問一個服務/ride.html,api-getway通過Authorizers直接去用cognito去驗證用戶的token - 這個例子分了兩個步驟，第一個步驟是直接登錄，登錄後獲得一個toke - 第二步驟是用api-gateway 自動驗證用戶的登錄，也就是authentication ……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-cognito-sample/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-cloudformation-lambda-apigateway/ title="Aws cloudformation deploy lambda and apigateway">Aws cloudformation deploy lambda and apigateway</a></h1></header><date class="post-meta meta-date">2019年9月5日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>用Cloudformation 来部署 java 的lambda 和api gateway,这里要用到spring-boot写java 代码，需要用到s3，存放lambda代码，需要创建lambda function和api agetway，还需要用到sam Aws lambda with Spring Boot 本文用到的git代码来自 https://github.com/gemerick/spring-boot-lambda 本文的内容来自 https://keyholesoftware.com/2018/04/26/aws-lambda-with-spring-boot/ 本文的步骤 安装sam git 克隆现有代码 创建s3 bucket 用cloudformation 上传 代码 用cloudformation 部署 测试代码 安装sam pip3 install --user aws-sam-cli git 克隆代码 git clone https://github.com/gemerick/spring-boot-lambda -b lambda mvn clean package 创建s3 bucket aws s3 mb s3://spring-boot-lambda-20100905 拷贝jar 到S3 ，更新sam的template aws cloudformation package --template-file sam.yaml --output-template-file target/output-sam.……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-cloudformation-lambda-apigateway/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-ecs-tutorial/ title="Aws ecs tutorial">Aws ecs tutorial</a></h1></header><date class="post-meta meta-date">2019年9月4日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>Aws ecs 简单来说就是host docker container，跟K8S类似，如果用过k8s，那么ecs非常的好理解 本文主要按照 Gentle Introduction to How AWS ECS Works with Example Tutorial 搭建 关于ECS的专业的词汇 Task Definition ：实际就是要给launch configration,比如暴露端口号，用什么docker image，cpu 内存需要多少，运行docker 的command，环境变量
Task ：简单来说就是一个running instance
Service ：一组task
Cluster ：一组task 跑在一个或者多个 constainer 里面
Container Instance ：容器实例里面跑的是多个 task
按照此图搭建一组ecs的服务 创建一个ecs cluster 创建一个ecsServiceRole 创建Task Definition 创建elb和 target group 创建 service，里面只有一个task 检查运行情况 把service里面的task 改为4 创建一个ecs cluster 创建secrutiry group my-ecs-sg……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-ecs-tutorial/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-sct-dms-tutorial/ title=aws数据库迁移工具简介>aws数据库迁移工具简介</a></h1></header><date class="post-meta meta-date">2019年9月3日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>Aws数据库迁移工具简介 越来越多的公司选择把服务迁移到云上,那么数据库的迁移尤其重要，亚马逊提供了数据迁移的工具 sct（schema converstion tool） 和 dms （data migration service）两个工具协作帮助客户从线下数据库导入到线上数据库,source 和 target 的database可以不是一种数据库类型，比如从mysql到oracle，或者mysql 到postgresql
简单介绍一下sct，简单点来说就是数据库schema转换工具，把本地的数据库的schema转换为aws线上目标数据库的schema，然后在线上导入这个schema生成数据库,然后用DMS帮你把数据导出到aws上
把aws mysql RDS 数据库 导出到 aws postgresql RDS 实验的目标就是把mysql数据库迁移到postgresql，由于在aws cloud上做比较方面，所以选择了都在云上来迁移做实验
Down load Aws schema convertion tool
create mysql database on aws
create database：test and table myclass with 2 column:id name
test id name 1 hello 2 kitty create postgresql database on aws
Open aws sct……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-sct-dms-tutorial/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-eni-can-not-be-deleted/ title="eni or eip can not be deleted">eni or eip can not be deleted</a></h1></header><date class="post-meta meta-date">2019年9月2日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>我几乎删除了所有的service，但是eni就是不让我删除 关联的eip也不让删除 我去aws社区看了很多帖子最后发现主要原因有两个地方 efs 使用eni nat gatway 使用了eni 根据这两点，我去查找，果然有个natgateway 使用eni，删除掉nat gateway后，eni可以删除，eip可以release了 ……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-eni-can-not-be-deleted/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-multi-eni-on-one-ec2-instance/ title="一个ec2 instance上配置多个eni">一个ec2 instance上配置多个eni</a></h1></header><date class="post-meta meta-date">2019年9月2日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>一个ec2 instance 配置多网卡 首先要确定你需要几个公网IP，以2个为例 首先要确定你需要几个网卡，以2个为例 申请两个 elastic ip：IP1 ip2 申请两个eni(network interface)：eni1，eni2 创建一个ec2 把ip1 绑定到eni1,elastic ip-&gt;选中IP-&gt;associate-&gt;resource type:network interface -&gt; private ip 自动选择 把ip2 绑定到eni2,此处省略步骤 把eni1绑定到ec2，network interface 页面-&gt;选择eni1-&gt;attach-&gt; 选择 ec2 instance id 把eni2绑定到ec2,此处省略步骤 在ec2 instance 页面,看到iP里面公网IP只有一个，private ip 有2个 为什么少了一个?用putty connnect 这个两个ip，都是没有问题，ec2 的console不显示而已
[ec2-user@ip-172-31-1-176 ~]$ ifconfig eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 9001 inet 172.31.1.176 netmask 255.255.255.0 broadcast 172.31.1.255 inet6 fe80::8a:93ff:fefd:ef5c prefixlen 64 scopeid 0x20&lt;link&gt; ether 02:8a:93:fd:ef:5c txqueuelen 1000 (Ethernet) RX packets 4115218 bytes 1170825027 (1.……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-multi-eni-on-one-ec2-instance/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-service-catalog/ title="service catalog 简介">service catalog 简介</a></h1></header><date class="post-meta meta-date">2019年8月29日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>Aws service catalog 简介 aws service catalog 从字面上看就是服务目录,也就是说一些服务放入一组，进行统一的规划，那里一些可以进行统一的规划呢？ 几个关键词 portfolio product constraint 傳統資源創建存在問題 從亞馬遜的blog上盜圖
上圖存在的幾個問題非常明顯
創建了一組資源，資源與資源之間無法互訪
EC2要訪問s3 ，那麼需要管理員授權
管理授權就要破壞兩個原則：service self-sufficient不滿足，最小權利原則(那就要定義允許ec2訪問s3的policy，所有的實例都可以訪問)
如何做到產品內部服務可以互訪，而產品外部的服務無權訪問呢？ 從亞馬遜的blog上盜圖
A和B是兩個portfolio ，組內可以互訪，但是A和B之間無法訪問
一個使用場景介紹 從亞馬遜的blog上盜圖
比如產品添加了一個s3-08的一個bucket，如果做到允許EC2_04訪問，而不允許其他產品或者本產品內部其他EC2訪問的呢？這就要用到 service catalog來解決
具體例子請看 (https://aws.amazon.com/blogs/mt/create-a-security-partition-for-your-applications-using-aws-service-catalog-and-aws-lambda/)
……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-service-catalog/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-infrastructure-as-code/ title="aws infrastructure as code">aws infrastructure as code</a></h1></header><date class="post-meta meta-date">2019年8月29日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-infrastructure-as-code/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-sap-sts-service/ title="使用Aws sts创建临时credential">使用Aws sts创建临时credential</a></h1></header><date class="post-meta meta-date">2019年8月26日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>Aws sts 简介 简单来说就是aws通过sts服务生成临时的credential给用户使用，他们可以设置有效期，自动失效,这也是amazon best practice 里面建议的方式 实验准备 创建 User 创建 Role 创建 s3 作为测试 为User创建sts assumeRole 的访问策略 在EC2上使用Aws cli 创建 历史的credential 访问s3 Create an IAM user https://console.aws.amazon.com/iam/home?region=ap-southeast-1#/users input name： mystsuser access type programmatic access 其他保持默认 Create role for antoher aws account https://console.aws.amazon.com/iam/home?region=ap-southeast-1#/roles 选择：another aws account Account ID: 找到上面的user 的arn，XXX就是ID (arn:aws:iam::XXXX:user/mystsuser) Attach plicy 搜索s3，选择 AmanzonS3ReadOnlyAccess,next reviews and create Role，input role name：sts-s3-read-only 创建完毕后，Update/Modify Trust Relationships replace (this is the arn of the user what you created) with arn:aws:iam::XXXX:user/mystsuser……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-sap-sts-service/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-sap-system-manager/ title="使用Aws System Manager 统一管理 aws resource">使用Aws System Manager 统一管理 aws resource</a></h1></header><date class="post-meta meta-date">2019年8月25日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>使用Aws System Manager 统一管理 aws resource Aws system Manager 简介 AWS Systems Manager gives you visibility and control of your infrastructure on AWS. Systems Manager provides a unified use:qr interface so you can view operational data from multiple AWS services and allows you to automate operational tasks across your AWS resources
Aws system manager AWS 让您能够查看和控制 AWS 上的基础设施。Systems Manager 可以提供一个统一的用户界面，供您查看多种 AWS 服务的运行数据，并在 AWS 资源上自动执行操作任务。
使用场景 比如我有个20台 linux ec2，不管什么类型的，只要安装centyos，那么都要给他安装 ，cloudwatch agent 来对系统的disk和memory进行监控 实验的前置条件 你的系统上必须安装SSM Agent 你的EC2的role 必须具有 AmazonEC2RoleforSSM 的policy attach上去 安装SSM agent Intel (x86_64) 64 位实例： sudo yum install -y https://s3.……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-sap-system-manager/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-nat-instance-setup/ title="NAT instance setup 简介">NAT instance setup 简介</a></h1></header><date class="post-meta meta-date">2019年8月20日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>AWS NAT instance setup 简介 NAT（Network Address Translation，网络地址转换）是1994年提出的。当在专用网内部的一些主机本来已经分配到了本地IP地址（即仅在本专用网内使用的专用地址），但现在又想和因特网上的主机通信（并不需要加密）时，可使用NAT方法。 AWS NAT gateway Aws 有專門的nat gateway,並且是HA的，只要創建gateway然後更改一下，subnet的路由就可以了，所以自己搭建一個nat gateway實際並不是aws的範疇，實際是一個linux系統的問題 手動搭建一個nat instance private subnet1/ instance1 / sg1(secrutiry group) / internal IP1 -&gt;local node1 public subnet2/ instance2 / sg2(sercirity group) / internal IP2 /public ip2 -&gt; proxy node2 配置proxy node vi /etc/sysctl.conf net.ipv4.ip_forward=1 iptables -t nat -A POSTROUTING -o eth0 -s 192.168.1.0/24 -j MASQUERADE 192.168.1.0/24 為本地網絡CIDR
EC2 頁面，選中proxy node2 -&gt;Action -&gt;Networking -&gt;Disable source/Desk Check……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-nat-instance-setup/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/why-do-we-need-k8s/ title=我们为什么需要K8S>我们为什么需要K8S</a></h1></header><date class="post-meta meta-date">2019年5月3日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/kubernetes>kubernetes</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/docker>docker</a></span></div><div class=post-content>我们为什么需要K8S 我们用最常用的一个例子LAMP（Linux/Apache/Mysql/PHP or Python or perl）搭建一個負載均均衡的多節點的網站，假如不考慮mysql環節，我們只考慮負載均衡和多節點的問題。
1：如果我们在本地数据中心进行产品部署的话,我们需要那些服务 负载均衡 LB 扩容和缩放 auto scaling 高可用 HA，一個節點挂掉，如果有新的節點自動產生take over他的服務 日志如何同步到一個中心? Docker部署或者裸程序 反向代理服務 那么问题来了，几乎所有的服务都需要我们自己部署和搭建，我们的基础设施，完全依赖裸的操作系统，我们要全部搭建，举几个最简单的例子：如何决定部署多少个Docker容器？如何让这些容器的服务负载均衡？每个容器里面的日志如何同步？任何一个docker容器服务挂掉该如何处理？ 我们操作系统的优化，硬件和网络高可用性，等等目前这些问题都需要我们在本地数据中心来实现，无论是复杂度还是需要硬件成本和技术都是非常高的。
2：如果在aws云上我们使用服务 LB(health check等配置) autoscaling cloudwatch logs 创建Lauch configuration 创建image 里面包含我们应用程序或者包含docker 日志的同步可以同步到elasticsearch服務 反向代理(使用lb的或者image裏面自己搭建nginx根據需要) 我们发现如果我们使用aws来构建我们的服务的话，这里面有很多成熟的服务我们可以拿来使用，这里面我们需要完成各个服务的配置，如果我们使用alicloud或者azure等各个服务平台的配置都是不一样的，即便我们有devops，我们使用terraform和assible来做devops也需要很多不同的代码，跨平台的移植非常麻煩
3. 使用K8s 是否需要負載均衡？是，k8s service本身就是負載均衡 是否需要考慮需要節點的擴容和縮放？是，K8s pod本身就支持autoscaling擴容和縮放 日志如何同步？可以直接使用K8s的存儲管理，可以不用第三方的服務 是否支持容器？一直都是以容器為基本單位就行部署的 系統的可移植性如何?你的程序無論在本地數據中心的K8S還是在各個云服務平臺的k8s上，devops的代碼的改動幾乎沒有多少，完全是跨平臺的。無論是開發者還是devops都可以聚焦於你的業務實現 6.反向代理，直接使用service ingress 就可以很容易解決 總之，k8S提供了你需要的完美的一體化的解決方案，所有的這些服務都集成在K8S内部，如果使用一些定制化的k8S平臺，比如openshit還集成了更多的開發和devops的工具在裏面，可以更快的開發和測試和部署，讓我們的用戶效率大大提高。……</div><p class=readmore><a href=https://clouda3.github.io/posts/why-do-we-need-k8s/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/aws-secutirygroup-networkacl/ title="security group vs network acl">security group vs network acl</a></h1></header><date class="post-meta meta-date">2019年2月26日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span></div><div class=post-content>Difference between Security Groups and Network Access Control List (NACL) Scope Network ACLs are applicable at the subnet level, so any instance in the subnet with an associated NACL will follow rules of NACL
Security groups has to be assigned explicitly to the instance. This means any instances within the subnet group gets the rule applied.
State: Stateful or Stateless Security groups are stateful.If you allow an incoming port 80,the outgoing port will be automatically opened Network ACLs are stateless .……</div><p class=readmore><a href=https://clouda3.github.io/posts/aws-secutirygroup-networkacl/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/jenkins_create_new_node/ title=如何配置jenkins新节点>如何配置jenkins新节点</a></h1></header><date class="post-meta meta-date">2018年10月13日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/jenkins>jenkins</a></span></div><div class=post-content>jenkins 节点 简介 在企业里面使用Jenkins自动部署时，大部分企业更新发布几个软件版本,但是对于一些公司有非常多的业务线或者产品来说，Jenkins就需要同时处理很多的任务，这时候就需要借助Jenkins多个node或者我们所说的Jenkins分布式SLAVE节点，来分开处理多个产品或者业务线的部署，目的就是master节点用来分配任务，slave节点来具体执行部署任务 配置 slave节点 jenkins -&gt;manage jenins -&gt; manage node and cloud -&gt;new node node name:test ,选择permanent node 填好number of executors:1 ,remote root,launch method:launch agent via ssh,Host,Credentials, Host Key Verification Strategy,known hosts file verification strategy ,availability:keep agent online as much as possible 在slave上安装各种需要软件 一定要安装相关的plugin和global tool configuration里面配置相关的工具软件 e 创建一个pipeline测试一下
pipeline { agent any stages { stage('Example') { steps { echo 'Hello World' } } } post { always { echo 'I will .……</div><p class=readmore><a href=https://clouda3.github.io/posts/jenkins_create_new_node/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/interview_questions/ title=面试问题集合>面试问题集合</a></h1></header><date class="post-meta meta-date">2018年7月28日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/aws>aws</a></span></div><div class=post-content>面试问题结合 为什么要使用Kafka在你们项目 使用什么方式来解决微服务的事务问题Seata 支持多种事物框架 如有大量的并发 HTTP 请求到同一个API如何设计 连接池，keep-alive,socket-timeout,connect-time等设置 如何保证一个高并发的程序能够很好的服务用户，该怎么设计 如何劝说客户迁移到云 K8s能给企业带来什么 如何设计一个websocket客户端的高可用 你为什么觉得你适合这个职位 你对你的职业生涯有什么规划 英文中文的自我介绍 为什么要使用elasticsearch 为什么要使用云服务 mysql索引为什么可以提高速度，elasticsearch倒排索引原理 java 查看jvm一些命令jstack jstat jmap mariadb和mysqldb区别 Solution architect Enterprise architect technical architect 区别 作为一个云架构师你要考哪些stakeholder的诉求 作为一个架构师需要哪些能力 什么是蓝绿发布/灰度发布/滚动发布 RTO RPO aws 混合云网络构建，AWS VPC网络如何通信 aws 私有云在公有云上备份 aws 异地多活.https://aws.amazon.com/cn/blogs/china/corporate-cloud-travel-hybrid-cloud-construction-and-common-cloud-application-scenarios/ 如何设计一个高并发的大数据处理系统，模块解耦，分布式处理，数据的分片和副本，流数据，网络设计和搭建，日志的处理 如果在咨詢行業我們我們處理不同行業客戶的產品的架構，我們怎麽才可以做好這樣的工作 ……</div><p class=readmore><a href=https://clouda3.github.io/posts/interview_questions/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/k8s-install-ingress/ title=k8s使用ingress总结>k8s使用ingress总结</a></h1></header><date class="post-meta meta-date">2018年5月3日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/kubernets>kubernets</a></span>
<span class=meta-category><a href=https://clouda3.github.io/categories/docker>docker</a></span></div><div class=post-content>安装准备 Centos7.7 vm 或者真实的物理机三台(master一台,node两台) 硬件要求2GB ram,最低2CPU，最少32GB 硬盘 节点之间最好网络互通，如果不考虑安全可以关闭firewalld 可以访问到外部网络,因为需要网络资源，比如yum源和其他k8s需要的yaml文件 需要安装和配置 yum源配置 防火墙selinux的关闭与配置 swap分区配置 桥接ipv4流量交给iptables 文件句柄数的限制 Docker的安装 Kubeadmin,flannel 创建deployment,service,pod,ingress,ingress controller,kubernets-dashboard 具体安装步骤 VM 网络选择bridge模式 master:192.168.25.200 node:192.168.25.187&frasl;192.168.25.188
防火墙
$ systemctl stop firewalld $ systemctl disable firewalld Selinux
$ sed -i &quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/selinux/config $ sed -i &quot;s/^SELINUX=permissive/SELINUX=disabled/g&quot; /etc/selinux/config $ setenforce 0 关闭swap
swapoff -a sed -i 's/.*swap.*/#&amp;/' /etc/fstab 网络转发
cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF net.……</div><p class=readmore><a href=https://clouda3.github.io/posts/k8s-install-ingress/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/bare-metal-server/ title=裸金属服务器使用>裸金属服务器使用</a></h1></header><date class="post-meta meta-date">2017年9月6日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>什么裸金属服务器 裸金属服务器（Bare Metal Server，BMS）是一款兼具弹性云服务器和物理机性能的计算类服务，为您和您的企业提供专属的云上物理服务器，为核心数据库、关键应用系统、高性能计算、大数据等业务提供卓越的计算性能以及数据安全。租户可灵活申请，按需使用。 裸金属服务器的开通是自助完成的，您只需要指定具体的服务器类型、镜像、所需要的网络配置等，即可在短时间内获得所需的裸金属服务器。服务器供应、运维工作交由华为云，您可以专注于业务创新。 产品架构 裸金属服务器在不同可用区中部署（可用区之间通过内网连接），部分可用区发生故障后不会影响同一区域内的其他可用区。 可以通过虚拟私有云建立专属的网络环境，设置子网、安全组，并通过弹性公网IP实现外网链接（需带宽支持）。 通过镜像服务，可以对裸金属服务器安装镜像，也可以通过私有镜像批量创建裸金属服务器，实现快速的业务部署。 通过云硬盘服务实现数据存储，并通过云硬盘备份服务实现数据的备份和恢复。 云监控是保持裸金属服务器可靠性、可用性和性能的重要部分，通过云监控，用户可以观察裸金属服务器资源。 云备份提供对云硬盘和裸金属服务器的备份保护服务，支持基于快照技术的备份服务，并支持利用备份数据恢复服务器和磁盘的数据。 华为裸金属的服务器的架构 与物理机和虚拟机的对比 什么场景下使用裸金属服务器 裸金属服务与一般云服务器最大的区别是是虚拟化与非虚拟化，虚拟化的缺点就是性能损失，操作系统和应用程序在调用硬件资源的时候，没有直接掌控，而是通过虚拟化软件间接管理的。 - 高安全性和法规要求 - 高性能计算场景 - 资源独占的场景
不同厂家的裸金属服务器的服务差别 有很多小厂的裸金属服务器，说实话就是一台独立主机，独立的独享宽带的网络（可以定制宽带），但是网络无法定制，比如没有VPC的选项，没有安全组，要自己通过防火墙软件管安全，也没有网络硬盘，说白了就是一台独立的远程主机。阿里云华为云这些已经非常成熟了，跟网络主机的区别不是太大，区别就是一个非虚拟化的主机而已，其他的地方基本上区别不大。……</div><p class=readmore><a href=https://clouda3.github.io/posts/bare-metal-server/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/firewalld-block-docker/ title=裸金属服务器遇到的docker容器访问问题>裸金属服务器遇到的docker容器访问问题</a></h1></header><date class="post-meta meta-date">2017年9月6日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/cloud>cloud</a></span></div><div class=post-content>问题描述 我们本地数据中心服务器处理与客户的接口的时候发现网络有严重的延迟，然后我们又有数据合规方面的问题，我们就采用云端的裸金属服务器，安装了docker后发现docker无法访问到主机。 问题发现 docker exec -ti docker-id bash 进入主机 在docker主机内部telnet 主机IP 端口 发现无法访问 退出虚拟主机在主机执行telnet 主机IP 端口 ，是可以访问的 检查网络 原来是docker0 与主机eth0 之间通信问题被firewall屏蔽了
firewall-cmd --permanent --add-rich-rule=&quot;rule family=&quot;ipv4&quot; source address=&quot;172.17.0.1/16&quot; accept&quot; firewall-cmd --reload ……</div><p class=readmore><a href=https://clouda3.github.io/posts/firewalld-block-docker/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/jdk-version-caused-dynamic-proxy-issue/ title=JDk版本問題造成的cglib運行時候出錯>JDk版本問題造成的cglib運行時候出錯</a></h1></header><date class="post-meta meta-date">2017年8月29日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/java>java</a></span></div><div class=post-content>異常信息 Caused by: java.lang.ExceptionInInitializerError: null at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:122) ~[spring-context-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:110) ~[spring-context-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:405) ~[spring-context-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] ... 20 common frames omitted Caused by: org.springframework.cglib.core.CodeGenerationException: java.lang.reflect.InaccessibleObjectException--&gt;Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @1134affc at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:464) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:336) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:93) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:91) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.internal.LoadingCache$2.call(LoadingCache.java:54) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na] at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:61) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:116) ~[spring-core-5.……</div><p class=readmore><a href=https://clouda3.github.io/posts/jdk-version-caused-dynamic-proxy-issue/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/linux-tcp-udp-port-test/ title=如何测试linux的tcp和udp端口>如何测试linux的tcp和udp端口</a></h1></header><date class="post-meta meta-date">2017年6月2日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>如何测试linux的tcp和udp端口 测试tcp 一般用使用 telnet
telnet 192.168.12.10 22 telnet 不支持udp协议，所以我们可以使用nc,nc可以支持tcp也可以支持udp
yum install -y nc nc -z -v 192.168.10.12 22 #tcp nc -z -v -u 192.168.10.12 123 # udp ……</div><p class=readmore><a href=https://clouda3.github.io/posts/linux-tcp-udp-port-test/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/why-epel/ title=为什么要使用epel>为什么要使用epel</a></h1></header><date class="post-meta meta-date">2017年5月22日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>Linux 安装包的痛苦经历 libcurl.so: libssh2.so.1: cannot open shared object file: No such file or directory libssl.so.10: cannot open shared object file: No such file or directory 如果遇到以上以上情况，libcurl需要libssh2依赖，那我们最希望的最法无非是yum install libssh2 libssl希望能安装好，那就解决了依赖的问题了，但是问题是没有
Last metadata expiration check: 2:33:40 ago on 18 Mar 2019 02:09:36 PM CST. No match for argument: libssh2 Error: Unable to find a match: libssh2 遇到这样的问题我们一般会去找一个rpm包去安装，通过rpm -ivh libssh2.rpm 发现缺少依赖
Requires libc.so.6()(64bit) libc.so.6(GLIBC_2.14)(64bit) libc.so.6(GLIBC_2.2.5)(64bit) libc.so.6(GLIBC_2.3)(64bit) libc.so.6(GLIBC_2.3.4)(64bit) libc.so.6(GLIBC_2.4)(64bit) libcrypto.so.3()(64bit) libcrypto.so.3(OPENSSL_3.0.0)(64bit) libssl.……</div><p class=readmore><a href=https://clouda3.github.io/posts/why-epel/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/linux-openvpn-install/ title=Openvpn最简单的安装方式>Openvpn最简单的安装方式</a></h1></header><date class="post-meta meta-date">2017年5月8日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>为什么会用到vpn vpn是我们经常会用到的工具，比如有些程序不允许我们在某些地区下载，有些网站我们没有办法看之类的，我们就vpn不管是pptp还是vpn无非改变都是路由问题，也就是你上网的出口的问题 openvpn openvpn是一款开源vpn软件，功能非常强大，用户非常多，遵循的是openvpn协议 缺点搭建有些复杂，但是有第三方的脚本协助搭建会非常简单
openvpn搭建借助于第三方脚本 作者git：https://github.com/Nyr/openvpn-install
wget https://git.io/vpn -O openvpn-install.sh &amp;&amp; bash openvpn-install.sh 最后生成一个*.ovpn文件
下载并安装openvpn gui：https://openvpn.net/community-downloads/
用安装好的客户端打开*.ovpn就可以登录远程的vpn服务器了
……</div><p class=readmore><a href=https://clouda3.github.io/posts/linux-openvpn-install/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/pythyon_collection/ title=python一些集合>python一些集合</a></h1></header><date class="post-meta meta-date">2017年5月4日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/python>python</a></span></div><div class=post-content>Python 面試題目 列表（list）和元组（tuple）有什么区别？
列表是可变的。创建后可以对其进行修改 元组是不可变的。元组一旦创建，就不能对其进行更改 列表表示的是顺序。它们是有序序列，通常是同一类型的对象 [&ldquo;APPLE&rdquo;,&ldquo;PEAR&rdquo;,&ldquo;ORANGE&rdquo;] 元组表示的是结构。可以用来存储不同数据类型的元素 [1,&ldquo;eric&rdquo;,1999-08-10,24] 什么是装饰器（decorator）
解释Range函数
解释map函数的工作原理
解释reduce函数的工作原理。
解释filter函数的工作原理
Python是按引用调用还是按值调用？
列表乘法是如何工作的?
类中的“self”指的是什么？
如何在Python中连接列表？
列表和数组有什么区别？ list vs array
Pandas
举出几个可变和不可变对象的例子
模块（module）和包（package）有什么区别？
在迭代序列时，为什么要使用enumerate？
pass、continue和break之间有什么区别?
如何将for循环转换为使用递推式构造列表（list comprehension）？
Python中的异常处理是如何进行的？
什么是init?init是Python中的方法或者结构。
什么是lambda函数？
Python中的self是什么？self是类的实例或对象。
Python中的函数方法是什么？
python中是否需要缩进？
python是否区分大小写？
Python中的局部变量和全局变量是什么？
什么是python模块？Python中有哪些常用的内置模块？
Python中的命名空间是什么？
如何在Python中管理内存？……</div><p class=readmore><a href=https://clouda3.github.io/posts/pythyon_collection/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/ansible-devops-tools/ title=Ansible简介>Ansible简介</a></h1></header><date class="post-meta meta-date">2017年3月6日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/devops>devops</a></span></div><div class=post-content>Ansible 简介 ansible是基于Python开发，集合了众多运维工具（puppet、chef）的优点，实现了批量系统配置、批量程序部署、批量运行命令等功能。最大的特点就是ansible不需要在远程主机上安装client/agents，因为它们是基于ssh来和远程主机通讯的。ansible目前已经已经被红帽官方收购，是自动化运维工具中大家认可度最高的，并且上手容易，学习简单。是每位运维工程师必须掌握的技能之一。 ## 特点 ##
部署简单，只需在主控端部署Ansible环境，被控端无需做任何操作； 默认使用SSH协议对设备进行管理； 有大量常规运维操作模块，可实现日常绝大部分操作； 配置简单、功能强大、扩展性强； 支持API及自定义模块，可通过Python轻松扩展； 通过Playbooks来定制强大的配置、状态管理； 轻量级，无需在客户端安装agent，更新时，只需在操作机上进行一次更新即可； 提供一个功能强大、操作性强的Web管理界面和REST API接口——AWX平台。 任务执行方式 ad-hoc模式(点对点模式)
使用单个模块，支持批量执行单条命令。ad-hoc 命令是一种可以快速输入的命令，而且不需要保存起来的命令。就相当于bash中的一句话shell。
playbook模式
是Ansible主要管理方式，也是Ansible功能强大的关键所在。playbook通过多个task集合完成一类功能.比如我们拷贝一个文件到主机，然后授予权限，然后启动程序这几个步骤结合在一起
Aansbile 文件和命令 ansible.cfg
inventory = /etc/ansible/hosts #这个参数表示资源清单inventory文件的位置 library = /usr/share/ansible #指向存放Ansible模块的目录，支持多个目录方式，只要用冒号（：）隔开就可以 forks = 5 #并发连接数，默认为5 sudo_user = root #设置默认执行命令的用户 remote_port = 22 #指定连接被管节点的管理端口，默认为22端口，建议修改，能够更加安全 host_key_checking = False #设置是否检查SSH主机的密钥，值为True/False。关闭后第一次连接不会提示配置实例 timeout = 60 #设置SSH连接的超时时间，单位为秒 log_path = /var/log/ansible.log #指定一个存储ansible日志的文件（默认不记录日志） inventory 文件
不分组……</div><p class=readmore><a href=https://clouda3.github.io/posts/ansible-devops-tools/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/linux-file-max-open/ title=linux最大文件打开数>linux最大文件打开数</a></h1></header><date class="post-meta meta-date">2016年5月7日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>文件最大打开数 如果服务器提供TCP服务（TCP层或者HTTP层），在并发访问量持续很高时，容易产生too many open files错误。这时查看netstat可以发现很多TIME_WAIT状态的链接，这说明大量链接处于半开状态，已经完成了请求响应，然后进行下一步操作，如果句柄数(文件打开数)超过了阈值，那就只能等待或者出错 解决方案 系统内核的修改
cat /proc/sys/fs/file-max sysctl -a sysctl -p 每个用户级别的修改
ulimit -n 1024000 (临时修改) vim /etc/security/limits.conf * soft nofile 2048 * hard nofile 2048 如果阿里云或者aws云里面的centos都是被优化过的，默认的1024都被修改成了65536了，所以对于大部分人来说足够用了
……</div><p class=readmore><a href=https://clouda3.github.io/posts/linux-file-max-open/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/linux-tree/ title=linux的tree命令>linux的tree命令</a></h1></header><date class="post-meta meta-date">2016年5月6日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>linux tree command Centos 是默认不带tree 命令的，如果要使用首先要install tree command
yum install -y tree 使用tree 显示目录的深度为2级
tree -L 2 . ├── easy-rsa-old-2.3.3 │ ├── configure.ac │ ├── COPYING │ ├── COPYRIGHT.GPL │ ├── distro │ ├── doc │ ├── easy-rsa │ └── Makefile.am ├── frgs.log ├── frp_0.32.1_linux_amd64 │ ├── frgs.log │ ├── frpc │ ├── frpc_full.ini │ ├── frpc.ini │ ├── frps │ ├── frps_full.ini │ ├── frps.ini │ ├── frps.……</div><p class=readmore><a href=https://clouda3.github.io/posts/linux-tree/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/pptp-client/ title=vpn客户端工具pptp介绍>vpn客户端工具pptp介绍</a></h1></header><date class="post-meta meta-date">2016年5月4日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>pptp 安装 yum install ppp pptp pptp-setup -y
创建 链接文件 /etc/ppp/peers/pptp
pty &quot;pptp 039.9966.org --nolaunchpppd --debug&quot; name hk789 password ff800800 remotename PPTP require-mppe-128 require-mschap-v2 refuse-eap refuse-pap refuse-chap refuse-mschap noauth debug persist maxfail 0 defaultroute #replacedefaultroute #usepeerdns 执行命令 modprobe nf_conntrack_pptp pppd call pptp ……</div><p class=readmore><a href=https://clouda3.github.io/posts/pptp-client/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/linux-lvm-resize/ title=lvm空间扩容>lvm空间扩容</a></h1></header><date class="post-meta meta-date">2016年4月20日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>[root@localhost ~]# df -H Filesystem Size Used Avail Use% Mounted on devtmpfs 17G 0 17G 0% /dev tmpfs 17G 0 17G 0% /dev/shm tmpfs 17G 9.1M 17G 1% /run tmpfs 17G 0 17G 0% /sys/fs/cgroup /dev/mapper/centos-root 54G 1.4G 53G 3% / /dev/sda2 1.1G 148M 916M 14% /boot /dev/sda1 210M 12M 198M 6% /boot/efi /dev/mapper/centos-home 12T 35M 12T 1% /home tmpfs 3.4G 0 3.4G 0% /run/user/0 分区不够合理 root 下面空间不够用
umount /home lvreduce -L 5T /dev/mapper/centos-home lvextend -L +5T /dev/mapper/centos-root xfs_growfs /dev/mapper/centos-root mkfs.……</div><p class=readmore><a href=https://clouda3.github.io/posts/linux-lvm-resize/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/linux-key-gen/ title=centos使用ssh-key免密登录>centos使用ssh-key免密登录</a></h1></header><date class="post-meta meta-date">2016年4月3日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/linux>linux</a></span></div><div class=post-content>centos ssh login 免密码登录 修改linux主机sshd配置
vi /etc/ssh/sshd_config RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys /sbin/service sshd restart 生成密钥,包括 id_rsa私钥，id_rsa.pub公钥
ssh-keygen -t rsa 更改文件名
mv ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys 拷贝id_rsa文件内容到任何一个linux客户端,remote.pem,使用ssh登录
ssh -i remote.pem user@host ……</div><p class=readmore><a href=https://clouda3.github.io/posts/linux-key-gen/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/jvm-optimize-related/ title=jvm参数优化>jvm参数优化</a></h1></header><date class="post-meta meta-date">2015年6月26日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/java>JAVA</a></span></div><div class=post-content>相关链接 https://blog.csdn.net/lingbo229/article/details/82586822 https://www.iteye.com/blog/kakaluyi-774227 https://blog.csdn.net/qq_44831907/article/details/113342146 https://www.cnblogs.com/jpfss/p/11050411.html ……</div><p class=readmore><a href=https://clouda3.github.io/posts/jvm-optimize-related/>阅读全文</a></p></article><article class=post><header><h1 class=post-title><a href=https://clouda3.github.io/posts/jenkins-devops-tools/ title=jenkins简介>jenkins简介</a></h1></header><date class="post-meta meta-date">2015年5月6日</date><div class=post-meta><span>|</span>
<span class=meta-category><a href=https://clouda3.github.io/categories/devops>devops</a></span></div><div class=post-content>什么是CI和CD CI(Continuous integration，中文意思是持续集成)/ CD(Continuous Delivery， 中文意思持续交付) CI/CD 是一种通过在应用开发阶段引入自动化来频繁向客户交付应用的方法。 CI/CD 的核心概念是持续集成、持续交付和持续部署。它是作为一个面向开发和运营团队的解决方案，主要针对在集成新代码时所引发的问题（也称为：“集成地狱”）。 CI/CD 可让持续自动化和持续监控贯穿于应用的整个生命周期（从集成和测试阶段，到交付和部署）。 jenkins简介 Jenkins是一个开源的、提供友好操作界面的持续集成(CI)工具，起源于Hudson（Hudson是商用的），主要用于持续、自动的构建/测试软件项目、监控外部任务的运行（这个比较抽象，暂且写上，不做解释）。Jenkins用Java语言编写，可在Tomcat等流行的servlet容器中运行，也可独立运行。通常与版本管理工具(SCM)、构建工具结合使用。可集成使用版本控制工具有SVN、GIT，以及构建工具有Maven、Ant、Gradle。 特点 易于安装-只要把jenkins.war部署到servlet容器，不需要数据库支持 易于配置-所有配置都是通过其提供的web界面实现； 有大量的插件可以配置使用,比如email通知结果,git,maven 附带了很多其他的功能比如用户密码的加密 可以支持备份,迁移,升级 还可以通过完全编程的方式Jenkinsfile,devops来实现纯代码的方式完全CI/CD 可以支持分布式的多个slave agent 可以保存每次build日志方便查阅 CI/CD 优势 1. 持续集成中的任何一个环节都是自动完成的，无需太多的人工干预，有利于减少重复过程以节省时间、费用和工作量 2. 持续集成保障了每个时间点上团队成员提交的代码是能成功集成的。换言之，任何时间点都能第一时间发现软件的集成问题，使任意时间发布可部署的软件成为了可能 3. CI/CD 具有高度的自动化 就是减少人工操作的事务，可以通过预先准备的脚本一次性运行，是我们内部或者外部用户，得到用户对于新版本的快速反馈，并且可以迅速处理任何明显的缺陷. 放几张图 ……</div><p class=readmore><a href=https://clouda3.github.io/posts/jenkins-devops-tools/>阅读全文</a></p></article><ol class=page-navigator><li class=prev><a href=https://clouda3.github.io/posts/>上一页</a></li><li><a href=https://clouda3.github.io/posts/>1</a></li><li class=current><a href=https://clouda3.github.io/posts/page/2/>2</a></li><li><a href=https://clouda3.github.io/posts/page/3/>3</a></li><li><a href=https://clouda3.github.io/posts/page/4/>4</a></li><li><a href=https://clouda3.github.io/posts/page/5/>5</a></li><li><a href=https://clouda3.github.io/posts/page/6/>6</a></li><li><a href=https://clouda3.github.io/posts/page/7/>7</a></li><li class=next><a href=https://clouda3.github.io/posts/page/3/>下一页</a></li></ol></div></div><div id=secondary><section class=widget><form id=search action=//www.google.com/search method=get accept-charset=utf-8 target=_blank _lpchecked=1><input type=text name=q maxlength=20 placeholder=Search>
<input type=hidden name=sitesearch value=https://clouda3.github.io/>
<button type=submit class="submit icon-search"></button></form></section><section class=widget><div class=addthis_inline_follow_toolbox></div><script type=text/javascript src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5ddc902b7d401ce9"></script></section><section class=widget><h3 class=widget-title>最近文章</h3><ul class=widget-list><li><a href=https://clouda3.github.io/posts/service-mesh/ title="什么是service mesh">什么是service mesh</a></li><li><a href=https://clouda3.github.io/posts/why-openshift/ title=企业为什么选择使用openshift>企业为什么选择使用openshift</a></li><li><a href=https://clouda3.github.io/posts/oauth2.0/ title=Oauth2.0>Oauth2.0</a></li><li><a href=https://clouda3.github.io/posts/devops-traning-slide/ title="Devops traning">Devops traning</a></li><li><a href=https://clouda3.github.io/posts/architect-design-principle/ title="architect design principle">architect design principle</a></li><li><a href=https://clouda3.github.io/posts/enterprise-arichitect-solution-arichitect-technical-architect-difference/ title="enterprise atchitect/solution architect/technical architect difference">enterprise atchitect/solution architect/technical architect difference</a></li><li><a href=https://clouda3.github.io/posts/linux-tmpfiles-clean/ title="linux 临时文件的管理">linux 临时文件的管理</a></li><li><a href=https://clouda3.github.io/posts/aws-best-practise-financial/ title=把最近一些东西aws东西画出来>把最近一些东西aws东西画出来</a></li><li><a href=https://clouda3.github.io/posts/centos-8-maintenance-stopped/ title="Centos 8維護已經停止了">Centos 8維護已經停止了</a></li><li><a href=https://clouda3.github.io/posts/jwt/ title=JWT>JWT</a></li></ul></section><section class=widget><h3 class=widget-title>分类</h3><ul class=widget-list><li><a href=https://clouda3.github.io/categories/alicloud/>Alicloud (1)</a></li><li><a href=https://clouda3.github.io/categories/ansible/>ansible (2)</a></li><li><a href=https://clouda3.github.io/categories/architect/>architect (3)</a></li><li><a href=https://clouda3.github.io/categories/aws/>aws (21)</a></li><li><a href=https://clouda3.github.io/categories/cdk/>cdk (2)</a></li><li><a href=https://clouda3.github.io/categories/centos/>centos (1)</a></li><li><a href=https://clouda3.github.io/categories/cloud/>cloud (20)</a></li><li><a href=https://clouda3.github.io/categories/devops/>devops (3)</a></li><li><a href=https://clouda3.github.io/categories/docker/>docker (3)</a></li><li><a href=https://clouda3.github.io/categories/gohugo/>gohugo (3)</a></li><li><a href=https://clouda3.github.io/categories/java/>JAVA (2)</a></li><li><a href=https://clouda3.github.io/categories/jenkins/>jenkins (1)</a></li><li><a href=https://clouda3.github.io/categories/k8s/>k8s (1)</a></li><li><a href=https://clouda3.github.io/categories/kafka/>kafka (1)</a></li><li><a href=https://clouda3.github.io/categories/kubernetes/>kubernetes (1)</a></li><li><a href=https://clouda3.github.io/categories/kubernets/>kubernets (1)</a></li><li><a href=https://clouda3.github.io/categories/linux/>linux (12)</a></li><li><a href=https://clouda3.github.io/categories/paas/>PAAS (2)</a></li><li><a href=https://clouda3.github.io/categories/polygon/>polygon (1)</a></li><li><a href=https://clouda3.github.io/categories/python/>python (1)</a></li><li><a href=https://clouda3.github.io/categories/security/>Security (2)</a></li><li><a href=https://clouda3.github.io/categories/terraform/>terraform (1)</a></li><li><a href=https://clouda3.github.io/categories/token/>Token (1)</a></li><li><a href=https://clouda3.github.io/categories/vagrant/>vagrant (1)</a></li><li><a href=https://clouda3.github.io/categories/vm/>vm (1)</a></li></ul></section><section class=widget><h3 class=widget-title>标签</h3><div class=tagcloud><a href=https://clouda3.github.io/tags/ansible/>ansible</a>
<a href=https://clouda3.github.io/tags/architect/>architect</a>
<a href=https://clouda3.github.io/tags/aws/>aws</a>
<a href=https://clouda3.github.io/tags/baremetal/>baremetal</a>
<a href=https://clouda3.github.io/tags/block/>block</a>
<a href=https://clouda3.github.io/tags/cdk/>cdk</a>
<a href=https://clouda3.github.io/tags/centos/>centos</a>
<a href=https://clouda3.github.io/tags/cert/>cert</a>
<a href=https://clouda3.github.io/tags/cloud/>cloud</a>
<a href=https://clouda3.github.io/tags/cri/>cri</a>
<a href=https://clouda3.github.io/tags/datacenter/>Datacenter</a>
<a href=https://clouda3.github.io/tags/devops/>devops</a>
<a href=https://clouda3.github.io/tags/docker/>docker</a>
<a href=https://clouda3.github.io/tags/epel/>epel</a>
<a href=https://clouda3.github.io/tags/hugo/>hugo</a>
<a href=https://clouda3.github.io/tags/ingress/>ingress</a>
<a href=https://clouda3.github.io/tags/java/>java</a>
<a href=https://clouda3.github.io/tags/jdk/>jdk</a>
<a href=https://clouda3.github.io/tags/jenkins/>jenkins</a>
<a href=https://clouda3.github.io/tags/jvm/>JVM</a>
<a href=https://clouda3.github.io/tags/jwt/>jwt</a>
<a href=https://clouda3.github.io/tags/k8s/>k8s</a>
<a href=https://clouda3.github.io/tags/kafka/>kafka</a>
<a href=https://clouda3.github.io/tags/kubenetes/>kubenetes</a>
<a href=https://clouda3.github.io/tags/linux/>linux</a>
<a href=https://clouda3.github.io/tags/lvm/>lvm</a>
<a href=https://clouda3.github.io/tags/maxfileopen/>maxfileopen</a>
<a href=https://clouda3.github.io/tags/oauth2.0/>oauth2.0</a>
<a href=https://clouda3.github.io/tags/oidc/>oidc</a>
<a href=https://clouda3.github.io/tags/openvpn/>openvpn</a>
<a href=https://clouda3.github.io/tags/paas/>PAAS</a>
<a href=https://clouda3.github.io/tags/pip/>pip</a>
<a href=https://clouda3.github.io/tags/pipeline/>pipeline</a>
<a href=https://clouda3.github.io/tags/polygon/>polygon</a>
<a href=https://clouda3.github.io/tags/privatelink/>privatelink</a>
<a href=https://clouda3.github.io/tags/producer/>producer</a>
<a href=https://clouda3.github.io/tags/python/>python</a>
<a href=https://clouda3.github.io/tags/saa/>saa</a>
<a href=https://clouda3.github.io/tags/sap/>sap</a>
<a href=https://clouda3.github.io/tags/security/>security</a>
<a href=https://clouda3.github.io/tags/service-mesh/>service mesh</a>
<a href=https://clouda3.github.io/tags/sshkey/>sshkey</a>
<a href=https://clouda3.github.io/tags/terraform/>terraform</a>
<a href=https://clouda3.github.io/tags/themes/>themes</a>
<a href=https://clouda3.github.io/tags/tmpfiles/>tmpfiles</a>
<a href=https://clouda3.github.io/tags/token/>token</a>
<a href=https://clouda3.github.io/tags/vagrant/>vagrant</a>
<a href=https://clouda3.github.io/tags/vm/>vm</a>
<a href=https://clouda3.github.io/tags/vpc/>vpc</a>
<a href=https://clouda3.github.io/tags/vpn/>vpn</a>
<a href=https://clouda3.github.io/tags/websocket/>websocket</a>
<a href=https://clouda3.github.io/tags/zookeeper/>zookeeper</a></div></section><section class=widget><h3 class=widget-title>其它</h3><ul class=widget-list><li><a href=https://clouda3.github.io/index.xml>文章 RSS</a></li></ul></section></div></div></div></div><ul class=listing><a href=https://clouda3.github.io/posts/service-mesh/>什么是service mesh</a> <time datetime=2023-11-23T12:40:37&#43;0800 class=post-date>Thu, Nov 23, 2023</time></ul>什么是service mesh Service Mesh又译作“服务网格”，作为服务间通信的基础设施层。Willian Morgan（Linkerd的CEO）如下定义Service Mesh。
Service Mesh 是一个基础设施层，用于处理服务间通信。云原生应用有着复杂的服务拓扑，Service Mesh 保证请求可以在这些拓扑中可靠地穿梭。在实际应用当中，Service Mesh 通常是由一系列轻量级的网络代理组成的，它们与应用程序部署在一起，但应用程序不需要知道它们的存在。
Service Mesh 实际上就是处于 TCP/IP 之上的一个抽象层，它假设底层的 L3/L4 网络能够点对点地传输字节（当然，它也假设网络环境是不可靠的，所以 Service Mesh 必须具备处理网络故障的能力）。
架构图 通过以上的架构图，很清晰的看到，最重要的两个部分就是control plane 和sidecar
Control Plane：控制平面是服务网格的集中管理和配置层。它负责控制和协调sidecar代理的行为。它提供了一个控制平面API，允许管理员配置流量管理、安全性和可观测性的策略、规则和设置。
Sidecar（旁车）：它基于Envoy代理。它是在同一Kubernetes POD中运行的另一个容器，负责处理所有的横切关注点。它基于旁车容器设计模式。•应用程序流量：微服务通过使用sidecar容器连接到其他微服务。应用程序流量基本上是Envoy sidecar代理容器之间的通信
Data Plane：数据平面指的是部署在每个服务实例旁边的一组sidecar代理组成的网络，用于与系统中的其他服务进行通信。它充当服务与网络的中间人。Sidecar代理处理入站和出站流量，拦截通信并提供其他功能。
Controllers：控制器是负责管理和控制网格行为的组件。它通常是一个软件组件，用于监视服务的状态和健康情况、配置流量路由和负载均衡规则、实施安全策略，并处理网格内服务之间通信的其他方面。
服务发现（Service Discovery）：服务发现是服务网格架构中的一个重要组件。它使得服务能够动态地定位和连接到彼此，而无需硬编码的地址。
证书授权机构（Certificate Authority）：它提供和管理根证书和中间证书，并执行证书签名操作。
应用程序微服务（Application Microservices）：这些是组成应用程序的各个服务或微服务。它们负责处理特定的功能或任务。
API端点（API Endpoints）：API端点是网格中的服务之间进行通信的入口点
方案 目前社区Service Mesh的开源解决方案有：Buoyant 公司推出的 Linkerd 和 Google、IBM 等厂商牵头的 Istio。Linkerd 更加成熟稳定些，Istio 功能更加丰富、设计上更为强大，社区相对也更加强大一些。
istio介绍 Istio是由Google、IBM和Lyft开源的微服务管理、保护和监控框架。Istio为希腊语，意思是”起航“。Istio是一个开源的服务网格平台，提供了一组工具和功能，用于管理和保护基于微服务的应用程序。它旨在解决复杂分布式系统中与服务之间通信、可观察性、安全性和流量管理相关的常见挑战。在其核心，Istio在应用程序中的每个微服务旁边部署一个称为Envoy的sidecar代理。这个sidecar代理拦截和管理服务的所有入站和出站流量，使得Istio可以控制和监控服务之间的通信。
优点：
Istio拥有庞大的在线服务网格社区，并且在互联网上备受赞誉和讨论。其GitHub的贡献者远远超过Linkerd，数量上占据优势。•此外，它支持Kubernetes和VM模式。
缺点：
Istio并非免费提供，使用它需要相当大的时间投入，包括阅读文档、设置、确保正常功能和持续维护。
在生产环境中实施和集成Istio可能需要几周甚至几个月的时间，这取决于基础架构的复杂性。 使用Istio需要相当大的资源开销。•与Linkerd不同，它缺乏内置的管理仪表板。 此外，Istio要求使用其自己的入口网关。 Istio控制平面仅在Kubernetes容器中受支持，没有可用于Istio数据平面的VM模式。<ul class=listing><a href=https://clouda3.github.io/posts/why-openshift/>企业为什么选择使用openshift</a> <time datetime=2022-11-23T12:40:37&#43;0800 class=post-date>Wed, Nov 23, 2022</time></ul>什么是openshift OpenShift是红帽的云开发平台即服务（PaaS）。自由和开放源码的云计算平台使开发人员能够创建、测试和运行他们的应用程序，并且可以把它们部署到云中。OpenShift广泛支持多种编程语言和框架，如Java，Ruby和PHP等。另外它还提供了多种集成开发工具如Eclipse integration，JBoss Developer Studio和 Jenkins等。OpenShift 基于一个开源生态系统为移动应用，数据库服务等，提供支持。 OpenShift Online服务构建在Red Hat Enterprise Linux上。Red Hat Enterprise Linux提供集成应用程序，运行库和一个配置可伸缩的多用户单实例的操作系统，以满足企业级应用的各种需求。
架构图 核心的概念 https://zhuanlan.zhihu.com/p/635160126?utm_id=0
容器（Container） 镜像（Image） 用户（User） 项目（Project） 容器沙箱（Pod） 部署（Deployment） 服务（Service） 路由（Router） 持久化存储（Persistent Storage） 模板（Template） 构建（Build）和镜像流（ImageStream）
为什么要使用openshift OpenShift的持续集成和持续部署（CI/CD）功能可以帮助开发者快速地将代码更改合并到主分支，并通过自动化的方式将其部署到生产环境，这不仅可以提高开发效率，还可以减少人为错误，提高软件的质量。
OpenShift的多租户支持功能使得不同的团队或者公司可以在同一个平台上共享资源，而不需要担心数据安全问题，每个租户都可以拥有自己的独立的应用程序、服务和数据库，这样就可以满足不同团队的需求。
OpenShift的应用市场功能提供了一个方便的平台，让开发者可以找到并使用各种预先构建的应用程序和服务，而不需要自己从头开始编写，这样不仅可以节省时间，还可以提高开发效率。
OpenShift的自动扩展功能可以根据应用程序的负载情况自动调整资源的分配，以确保应用程序的性能和可用性，这样可以避免因为资源不足而导致的应用程序崩溃，也可以在需求增加时快速地扩展应用程序的能力。
OpenShift的优势在于其简单易用、功能强大和灵活可扩展的特性，它可以帮助开发者快速地部署和管理应用程序，提高开发效率，降低运维成本。<ul class=listing><a href=https://clouda3.github.io/posts/oauth2.0/>Oauth2.0</a> <time datetime=2022-10-23T12:40:37&#43;0800 class=post-date>Sun, Oct 23, 2022</time></ul>what is oauth2.0 OAuth 2.0, which stands for “Open Authorization”, is a standard designed to allow a website or application to access resources hosted by other web apps on behalf of a user. It replaced OAuth 1.0 in 2012 and is now the d industry standard for online authorization. OAuth 2.0 provides consented access and restricts actions of what the client app can perform on resources on behalf of the user, without ever sharing the user&rsquo;s credentials.<div class=read-more-link><a href=/posts/oauth2.0/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/devops-traning-slide/>Devops traning</a> <time datetime=2022-06-17T10:40:37&#43;0800 class=post-date>Fri, Jun 17, 2022</time></ul>Devops DevOps is a set of practices that combines software development (Dev) and IT operations (Ops). It aims to shorten the systems development life cycle and provide continuous delivery with high software quality.DevOps is complementary with Agile software development;
CI/CD is a best practice for devops and agile development. CI/CD bridges the gaps between development and operation activities and teams by enforcing automation in building, testing and deployment of applications.<div class=read-more-link><a href=/posts/devops-traning-slide/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/architect-design-principle/>architect design principle</a> <time datetime=2022-06-15T10:40:37&#43;0800 class=post-date>Wed, Jun 15, 2022</time></ul>Architect design principle Techinical part Scaling workload Building resilient architecture Design for performance Loose coupling Data-driven design Security everywhere Automating everything Function part Design for compliance Design for operation Design for System monitoring Methodology part Design for agile dev Design for agile devops<ul class=listing><a href=https://clouda3.github.io/posts/enterprise-arichitect-solution-arichitect-technical-architect-difference/>enterprise atchitect/solution architect/technical architect difference</a> <time datetime=2022-06-10T10:40:37&#43;0800 class=post-date>Fri, Jun 10, 2022</time></ul>Architect Different architect Enterprise Architect
play a key role when it comes to identifying business needs in context with external factors like competitors and internal factors like a company’s IT landscape.
Solution Architect
focused on details and solution technologies to address a specific business problem, it provides a channel between enterprise architecture and technical architecture
Techinical Architect
focused more on designing and implementing technical solutions.<ul class=listing><a href=https://clouda3.github.io/posts/linux-tmpfiles-clean/>linux 临时文件的管理</a> <time datetime=2022-05-07T10:30:37&#43;0800 class=post-date>Sat, May 7, 2022</time></ul>Centos临时目录的系统管理 Linux产生大量的临时文件和目录，例如/tmp、/run 。RHEL7或者CentOS7中，systemd提供了一个结构化的可配置方法来管理临时文件和目录，即systemd-tmpfiles，可以创建、删除和管理临时文件的服务。旧版本系统使用watchtmp+cron来共同实现管理临时文件。
systemd启动后，其中一个启动的服务单元是systemd-tmpfiles-setup，该服务的命令为:systemd-tmpfiles &ndash;creat/&ndash;clean *conf , *conf是可选的，不写默认是使用所有配置文件
配置文件，优先级从上到下。 /etc/tmpfiles.d/*conf ，管理员可修改的配置文件 /run/tmpfiles.d/*conf ，daemon应用程序自己管理的配置文件，不建议更改 /usr/lib/tmpfiles.d/*conf，rpm软件安装时，自动更新的配置文件，不能更改 定期清理timer systemd定时器单元会按固定间隔调用systemd-tmpfiles --clean 。 systemctl status systemd-tmpfiles-clean.timer 查看timer状态。 systemctl cat systemd-tmpfiles-clean.timer 查看timer具体内容，也可以进入/usr/lib/systemd/system目录后使用more systemd-tmpfiles-clean.timer 来查看。 从timer具体内容可以知道系统启动15分钟后和每天会运行一次systemd-tmpfiles --clean.那么timer定时运行的是哪些服务呢？ 是在systemd-tmpfiles-clean.service里面定义的： systemctl cat systemd-tmpfiles-clean.service可以查看。<ul class=listing><a href=https://clouda3.github.io/posts/aws-best-practise-financial/>把最近一些东西aws东西画出来</a> <time datetime=2022-04-26T12:40:37&#43;0800 class=post-date>Tue, Apr 26, 2022</time></ul><ul class=listing><a href=https://clouda3.github.io/posts/centos-8-maintenance-stopped/>Centos 8維護已經停止了</a> <time datetime=2022-02-15T12:40:37&#43;0800 class=post-date>Tue, Feb 15, 2022</time></ul>Centos 8 維護已經停止了 年前安裝了centos8.2 yum 的repo還是用的默認的，一切都正常,昨天在新的服務器上發現yum的repo已經無法使用了，我當時就意識到應該維護停止了，馬上去網上查一下，果然如此，如果想繼續使用請替換掉原來的mirror，使用centos-vault，https://mirrors.aliyun.com/centos-vault/ 或者 https://vault.centos.org/8.2.2004/ Centos 7 的維護還是會繼續到2024年 CentOS yes Community Enterprise Operating System（ Community enterprise operating system ） An acronym for , yes 100％ Reconstructed RHEL（ Red Hat Enterprise Linux）. Even though RHEL It costs money , but CentOS It's free. , Community supported businesses Linux Distribution version . Good at Linux And don't want to pay RHEL Support fee developers and companies always choose CentOS To save money and get enterprise software .<div class=read-more-link><a href=/posts/centos-8-maintenance-stopped/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/jwt/>JWT</a> <time datetime=2021-12-03T10:30:37&#43;0800 class=post-date>Fri, Dec 3, 2021</time></ul>what is jwt JSON Web Tokens are an open, industry standard RFC 7519 method for representing claims securely between two parties.
jwt structure A well-formed JWT consists of three concatenated Base64url-encoded strings, separated by dots (.):
JOSE Header: contains metadata about the type of token and the cryptographic algorithms used to secure its contents.
JWS payload (set of claims): contains verifiable security statements, such as the identity of the user and the permissions they are allowed.<div class=read-more-link><a href=/posts/jwt/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/polygon-websoket-data-transfer-issue/>Polygon在websoket的连接串数据的经常中断</a> <time datetime=2021-11-20T11:40:30&#43;0800 class=post-date>Sat, Nov 20, 2021</time></ul>本来使用工具或者服务 Pologon 美股数据供应商 Kafka Nettty Centos8.2 架构图 架构说明 Polygon是美股的数据供应商,提供美股tick级别的数据服务 美股开盘数据非常的大，平时可以达到6M/秒的传输速度，也就是说可以达到每秒6万条数据的传输速度 数据的传输是基于internet的传输，所以要保障数据在互联网上的快速传输必须基于长连接来实现，因此polygon提供了websocket服务 我们的app收到polygon websocket推送过来的数据要进行简单的解析和格式转换，然后发送到本地的kafka cluster中间件用来分发数据，给其他的应用来做大数据处理包括flink等大数据中间件 出现的问题 Polygon数据传输出现了频繁的中断1：Slow consumer slow consumer:https://polygon.io/docs/stocks/ws_getting-started 查看了一下polygon的技術文檔: if a client is consuming messages too slowly for too long, Polygon.io&rsquo;s server-side buffer may get too large. If that happens, Polygon.io will terminate the WebSocket connection. You can check your account dashboard to see if a connection was terminated as a slow consumer. If this happens to you consistently, consider subscribing to fewer symbols or channels.<div class=read-more-link><a href=/posts/polygon-websoket-data-transfer-issue/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/application-network-issue-caused-thread-block/>交换机故障导致线程阻塞</a> <time datetime=2021-08-21T12:40:37&#43;0800 class=post-date>Sat, Aug 21, 2021</time></ul>本来使用工具或者服务 Jconsole Jstack prometheus 架构图 架构说明 This is an internal application (Not cloud) architect,we have big network traffic and lots of application ,we deploy in our own server
we have a RabbitMQ server (which our data provider will send HKEX data to this server)
we have an Application will consume the messages from MQ
Our application will process the data and sending to Kafka and Elastic search<div class=read-more-link><a href=/posts/application-network-issue-caused-thread-block/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/alicloud_privatelink/>阿里云架构-使用privatelink让不同的vpc的服务可以访问</a> <time datetime=2021-07-28T12:40:37&#43;0800 class=post-date>Wed, Jul 28, 2021</time></ul>本来使用工具或者服务 Alicloud vpc SLB PrivateLink endpoit zone and service ECS 架构图 架构说明 对于两个网络（VPC-A，VPC-B）的ECS提供的服务，要是A访问B，可以提供以下方案
B通过EIP或者IP或者绑定SLB，通过SLB的IP把B的服务暴露在公网上 A网络和B网络互联 通过privatelink来单向向让A网络的访问B网络的服务 分析上面优缺点
安全性不好，把服务暴露在公网 A和B网络直接互联创建路由成本太高，第二就是可能会造成网络冲突 通过privatelink私有网络连接成本低廉，单向的内网服务，不改变各自的网络配置 Privatelink 如何创建privatelink服务
privatelind endpoint service：需要关联一个SLB，此slb必须支持privatelink的SLB，slb后面就是ECS或者其他的rds等都可以
privatelink endpoint 创建的是时候需要跟endpoint service 连接 一旦创建并且链接成功，那么privatelink就可以生效了
privatelink endpoint 有一个DNS地址，我们可以通过地址直接访问，此地址是aliyun内网地址<ul class=listing><a href=https://clouda3.github.io/posts/point-to-point-network-transfer-speed-test/>網絡服務器點對點的網速測試</a> <time datetime=2021-06-02T10:00:30&#43;0800 class=post-date>Wed, Jun 2, 2021</time></ul>本文简介 我們跟數據供應商之間數據傳輸一直存在很多的問題，我們的網絡經過測速后非常的快，供應商也反復說他們的網速也非常快，那麽問題來了?既然大家都快，是不是在某個路由環節之間出現了問題呢? iperf 簡介 iperf是一种命令行工具，用于通过测量服务器之間可以处理的最大网络吞吐量来诊断网络速度问题。 iperf信息 iperf版本： iperf 3.1.3 官网地址： https://iperf.fr 安裝和運行 server
rpm -ivh https://iperf.fr/download/fedora/iperf3-3.1.3-1.fc24.x86_64.rpm iperf3 -s client
rpm -ivh https://iperf.fr/download/fedora/iperf3-3.1.3-1.fc24.x86_64.rpm iperf3 -c serverip -p 5201 運行結果 [root@PC-231 ~]# iperf3 -c 172.16.10.101 -p 5201 Connecting to host 172.16.10.101, port 5201 [ 4] local 192.168.25.231 port 59398 connected to 172.16.10.101 port 5201 [ ID] Interval Transfer Bandwidth Retr Cwnd [ 4] 0.<div class=read-more-link><a href=/posts/point-to-point-network-transfer-speed-test/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/aws-cdk/>aws cdk introduction</a> <time datetime=2021-02-26T12:40:37&#43;0800 class=post-date>Fri, Feb 26, 2021</time></ul>What is the AWS CDK? The AWS Cloud Development Kit (CDK) ,a framework for defining cloud infrastructure in code and provisioning it through AWS CloudFormation.
CDK stack How does CDK work Build with high-level constructs that automatically provide sensible, secure defaults for your AWS resources, defining more infrastructure with less code. Use programming idioms like parameters, conditionals, loops, composition, and inheritance to model your system design from building blocks provided by AWS and others.<div class=read-more-link><a href=/posts/aws-cdk/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/local-datacenter-vs-cloud/>本地数据中心和云的对比</a> <time datetime=2021-02-02T10:00:30&#43;0800 class=post-date>Tue, Feb 2, 2021</time></ul>本文简介 本来主要介绍云和本地的数据中心的对比，主要用阿里云来对比，作为aws和alicloud的认证工程师，我对云上的和自有数据中心架构系统做个详细的对比，本文，仅仅用alicloud 本系统简介 本系统主要是做美股和港股的数据处理，美股数据来源是polygon（基于websocket数据推送和restful查询api）,港股的数据来源是港交所（UDP广播）
本系统功能：接收美股和港股的数据，并作本地的消息存储，用消息中间件来存储交易所数据，然用以一部分数据用来做大数据实时计算，一部数据用来做持久化的存储
本系统的架构图 本系統本地使用硬件 軟件 狀態 服務器 數量 存儲 數量 Kafka cluster centos8.2 5 ssd 4 raid5 Elatic search cluster centos8.2 3 ssd 4 raid5 Flink cluster centos8.2 3 ssd 4 raid5 Polygon subscriber single centos8.2 1 ssd 4 raid5 APP single centos8.2 1 ssd 4 raid5 本地數據中心存在的主要問題 硬件的問題 1.<div class=read-more-link><a href=/posts/local-datacenter-vs-cloud/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/kafka-cluster-setup/>kafka cluster的搭建</a> <time datetime=2020-07-30T11:40:37&#43;0800 class=post-date>Thu, Jul 30, 2020</time></ul>本文使用工具或者服务 Java 8 https://archive.apache.org/dist/kafka/3.0.0/kafka_2.13-3.0.0.tgz https://www.apache.org/dyn/closer.lua/zookeeper/zookeeper-3.7.0/apache-zookeeper-3.7.0-bin.tar.gz Centos8.2 Zookeeper 簡介 ZooKeeper是一个分布式协调服务，它的主要作用是为分布式系统提供一致性服务，提供的功能包括：配置维护、命名服务、分布式同步、组服务等。Kafka的运行依赖ZooKeeper。 Broker注册 Topic注册 生产者负载均衡 消费者负载均衡 消费者注册 Kafka 簡介 Kafka是由Apache软件基金会开发的一个开源流处理平台，由Scala和Java编写。Kafka是一种高吞吐量的分布式发布订阅消息系统，它可以处理消费者在网站中的所有动作流数据。 Kafka 是一种高吞吐量的分布式发布订阅消息系统，有如下特性： 通过O(1)的磁盘数据结构提供消息的持久化，这种结构对于即使数以TB的消息存储也能够保持长时间的稳定性能。 高吞吐量 即使是非常普通的硬件Kafka也可以支持每秒数百万的消息。 支持通过Kafka服务器和消费机集群来分区消息。 zookeeper 與kafka之間的關係 ZooKeeper用于分布式系统的协调，Kafka使用ZooKeeper也是基于相同的原因。ZooKeeper主要用来协调Kafka的各个broker，不仅可以实现broker的负载均衡，而且当增加了broker或者某个broker故障了，ZooKeeper将会通知生产者和消费者，这样可以保证整个系统正常运转。 安裝zooker和kafka 之前首先要做系統的優化和配置 文件句柄數的調整 oracle Jre8 安裝 磁盤的分區和挂載點必須滿足kafka大數量的存儲xfs分區 關閉selinux 防火墻暫時關閉(後面看可以統一規劃端口) 創建非root的kafka管理用戶並添加sudoer權限 注意事項 kafka是一個分佈式的消息系統，我們會臨時存儲消息，如果存儲消息的時間長，那麽需要大空間，所以分區的時候已經要注意，就是安裝kafka的時候存儲一定要挂載到大的硬盤空間上 Zookeeper 配置 # The number of milliseconds of each tick tickTime=2000 # The number of ticks that the initial # synchronization phase can take initLimit=10 # The number of ticks that can pass between # sending a request and getting an acknowledgement syncLimit=5 # the directory where the snapshot is stored.<div class=read-more-link><a href=/posts/kafka-cluster-setup/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/alicloud-terraform-create-ecs-ansible-provision/>使用terraform创建阿里ecs用ansible完成主机配置</a> <time datetime=2020-05-29T12:40:37&#43;0800 class=post-date>Fri, May 29, 2020</time></ul>使用terraform创建ecs用ansible完成ecs的provision 本文目标就是是用terraform创建ecs包括security group,disk,vpc,vswtich,然后用ansible来初始化和配置创建好的ecs 本文只是创建了一个单机ecs，后续的文章会有load balance出现 terrorm 创建ecs 什么是terraform terraform是云工具，也就是针对云平台的 terraform是在云平台上管理资源的，就是一个云资源编排工具 terraform目标是&rdquo;Write, Plan, and create Infrastructure as Code&rdquo;, 基础架构即代码。具体的说就是可以用代码来管理维护 IT 资源，把之前需要手动操作的一部分任务通过程序来自动化的完成，这样的做的结果非常明显：高效、不易出错。 Terraform 核心功能
基础架构即代码(Infrastructure as Code) 执行计划(Execution Plans) 资源图(Resource Graph) 自动化变更(Change Automation) terraform安装
下载https://www.terraform.io/downloads.html 设置环境变量（省略） 创建terraform 配置文件
main.tf
provider &quot;alicloud&quot; { access_key = &quot;xxx&quot; secret_key = &quot;xxx&quot; region = &quot;ap-southeast-1&quot; #version = &quot;~&gt; 1.5.0&quot; } data &quot;alicloud_instance_types&quot; &quot;instance_type&quot; { instance_type_family = &quot;ecs.<div class=read-more-link><a href=/posts/alicloud-terraform-create-ecs-ansible-provision/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/ansible-deploy-docker-container/>使用ansible在多台客户机安装docker</a> <time datetime=2020-05-22T12:40:37&#43;0800 class=post-date>Fri, May 22, 2020</time></ul>Install ansible on server Ansible是一个开源配置管理工具，可以使用它来自动化任务，部署应用程序实现IT基础架构。Ansible可以用来自动化日常任务，比如，服务器的初始化配置、安全基线配置、更新和打补丁系统，安装软件包等 Ansible包括控制节点（Control node）也叫主机，受控节点（Managed nodes）也叫客户机,只在控制节点安装就好了 ansible 优点 只需要在主机上安装ansible软件，客户机不需要安装 通讯协议SSH协议和SFTP 可并行执行程序，默认情况下，forks值为5，可以按需，在配置文件中增大该值 ansible(centos)安装和配置 yum install ansible
为了使Ansible与客户端通信，需要使用用户帐户配置管理机和客户机。为了方便快捷安全，一般会配置证书方式连接客户机
ssh-keygen ssh-copy-id ansible@node ip 使用ad-hoc 在客户执行命令，相当于命令行 /etc/ansible/hosts,最好谨慎使用hosts配置，安全问题需要解决
[docker] 192.168.25.173 ansible_ssh_port=22 ansible_ssh_user=root ansible_ssh_pass=&quot;xxx&quot; 执行以下ping,命令里面的docker对应的上面文件的docker
ansible docker -m ping 使用ad-hoc命令管理软件包,安装
ansible docker -m yum -a &quot;name=docker state=present&quot; -b 使用ad-hoc命令管理软件包,设置默认启动
ansible docker -b -m service -a &quot;name=docker enabled=yes&quot; 使用ad-hoc命令管理软件包,启动
ansible docker -b -m service -a &quot;name=httpd state=started&quot; 使用ansible-playbook 部署docker test-ansile.<div class=read-more-link><a href=/posts/ansible-deploy-docker-container/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/linux-cerbot/>给nginx安装免费的证书</a> <time datetime=2020-05-08T14:40:37&#43;0800 class=post-date>Fri, May 8, 2020</time></ul>https vs http https比http安全原因是传输的过程中使用了加密，因为https在服务器端使用证书 证书的认证需要认证机构，随便一个https的证书阿里巴巴云最便宜的一年要2000多，aws更是贵到天上，所以对于个人程序员来来说最好有免费的证书 cerbot就是你的选择 cerbot简介 cerbot就是Electronic Frontier Foundation (EFF)这个机构给大家发的福利，简单的一句话来说就是给你提供3个月的免费证书，证书到期后继续免费续约，个人网站是用最方便，每三个月更新一次就可以了 cerbot 使用 cerbot 安装脚本
yum -y install yum-utils yum-config-manager --enable rhui-REGION-rhel-server-extras rhui-REGION-rhel-server-optional sudo yum install certbot python2-certbot-nginx sudo certbot --nginx(sudo certbot certonly --nginx) echo &quot;0 0,12 * * * root python -c 'import random; import time; time.sleep(random.random() * 3600)' &amp;&amp; certbot renew -q&quot; | sudo tee -a /etc/crontab &gt; /dev/null (auto renewal) cerbot 证书验证 To confirm that your site is set up properly, visit https://yourwebsite.<div class=read-more-link><a href=/posts/linux-cerbot/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/vagrant-windows-template/>vagrant使用介绍</a> <time datetime=2020-04-22T10:30:37&#43;0800 class=post-date>Wed, Apr 22, 2020</time></ul>vagrant 简介 VirtualBox 是一款开源虚拟机软件,vagrant是一个基于Ruby的工具，用于创建和部署虚拟化开发环境。它使用Oracle的开源VirtualBox虚拟化系统，使用Chef创建自动化虚拟环境。 BBC Vagrant 是基于VirtualBox创建的虚拟机，并通过Vagrant进行打包而得到的VM环境。在虚拟机中部署好开发环境并建立虚拟机和实体机的文件共享，在开发时，可以通过实体机进行文件修改，并经过虚拟机中的环境执行，从而实现不同操作系统的工作环境的轻松部署。
安装 vagrant和virtualbox 下载并安装VirtualBox（ https://www.virtualbox.org/wiki/Downloads ）。
VirtualBox 4.3.12下载地址(windows请用此链接)：http://dlc-cdn.sun.com/virtualbox/4.3.12/index.html
下载并安装Vagrant（ http://www.vagrantup.com/downloads.html ）。
安装和定制box 下载windows 10 box文件。 https://app.vagrantup.com/mrlesmithjr/boxes/windows10/versions/1574780096/providers/virtualbox.box 到c:\vagrant\download
执行命令
vagrant box add win10 c:\vagrant\download\virtualbox.box cd c:\vagrant vagrant init win10 vagrant up 2&gt; vagrant.log 查看模板文件c:\vagrant\Vagrantfile
$script = &lt;&lt;-'SCRIPT' echo &quot;starting wechat&quot; ipconfig &gt; c:\ip.log C:\Users\wechat\WeChat.exe &gt; c:\wechat.log netstat &gt; c:\netstat.log echo &quot;started wechat&quot; SCRIPT Vagrant.<div class=read-more-link><a href=/posts/vagrant-windows-template/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/hugo-advanced-level-lesson/>手把手使用Hugo搭建网站-高级篇</a> <time datetime=2019-11-26T12:40:37&#43;0800 class=post-date>Tue, Nov 26, 2019</time></ul>1.3. 手把手使用hugo搭建网站高级篇
1.3.1. 創建页面的目錄 hugo提供了目錄的支持table of content
創建目錄首先你的文章必須有標題 在layouts/_default/single.html 添加代碼 {{.TableOfContents}}
{{ define &quot;main&quot; -}} &lt;div class=&quot;post&quot;&gt; &lt;h1&gt;{{ .Title }}&lt;/h1&gt; &lt;time datetime={{ .Date.Format &quot;2006-01-02T15:04:05Z0700&quot; }} class=&quot;post-date&quot;&gt;{{ .Date.Format &quot;Mon, Jan 2, 2006&quot; }}&lt;/time&gt; {{.TableOfContents}} {{ .Content }} &lt;/div&gt; {{ if .Site.DisqusShortname -}} &lt;h2&gt;Comments&lt;/h2&gt; {{ template &quot;_internal/disqus.html&quot; . }} {{- end }} {{ partial &quot;related.html&quot; . }} {{- end }}
1.3.2. 创建搜索 伪站内搜索 使用google cse<div class=read-more-link><a href=/posts/hugo-advanced-level-lesson/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/hugo-medium-level-lesson/>手把手使用Hugo搭建网站-中级篇</a> <time datetime=2019-11-26T11:40:37&#43;0800 class=post-date>Tue, Nov 26, 2019</time></ul>1.2. 手把手使用hugo搭建网站进阶篇
1.2.1. 自定义菜单 配置定义菜单栏
layouts/partials/sidebar.html
&lt;aside class=&quot;sidebar&quot;&gt; &lt;div class=&quot;container sidebar-sticky&quot;&gt; &lt;div class=&quot;sidebar-about&quot;&gt; &lt;a href=&quot;{{ .Site.BaseURL }}&quot;&gt;&lt;h1&gt;{{ .Site.Title }}&lt;/h1&gt;&lt;/a&gt; &lt;p class=&quot;lead&quot;&gt; {{ with .Site.Params.description }} {{.}} {{ else }}{{end}} &lt;/p&gt; &lt;/div&gt; &lt;nav&gt; &lt;ul class=&quot;sidebar-nav&quot;&gt; {{ $currentPage := . }} {{ range .Site.Menus.main -}} &lt;li&gt; &lt;a class=&quot;sidebar-nav-item{{if or ($currentPage.IsMenuCurrent &quot;main&quot; .) ($currentPage.HasMenuCurrent &quot;main&quot; .) }} active{{end}}&quot; href=&quot;{{ .URL }}&quot; title=&quot;{{ .Title }}&quot;&gt;{{ .Name }}&lt;/a&gt; &lt;/li&gt; {{- end }} &lt;/ul&gt; &lt;ul class=&quot;sidebar-nav&quot;&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;/ul&gt; &lt;/nav&gt; &lt;p&gt;{{ with .<div class=read-more-link><a href=/posts/hugo-medium-level-lesson/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/hugo-entry-level-lesson/>手把手使用Hugo搭建网站-初级篇</a> <time datetime=2019-11-26T10:40:37&#43;0800 class=post-date>Tue, Nov 26, 2019</time></ul>1.1. 手把手使用hugo搭建网站初级篇
1.1.1. Demo使用hugo的网站 https://www.flysnow.org/ https://www.gohugo.io https://www.netlify.com/ https://gohugo.io/showcase/ https://www.smashingmagazine.com/
1.1.2. 部分主题 https://github.com/Vimux/Mainroad https://github.com/kingfsen/Mainroad https://themes.gohugo.io/academic/ https://themes.gohugo.io/beautifulhugo/ https://themes.gohugo.io/hyde/ https://themes.gohugo.io/hugo-theme-even/ https://github.com/rujews/maupassant-hugo
1.1.3. hugo跟wordpress其他建站工具的对比 wordpress 全球31%的网站使用wordpress，尽管他有各种主题和插件，但是也有非常多的缺点，安全性，seo不够友好，定制麻烦 hugo 最快的静态生成工具,seo友好，静态更安全，方便定制模板，缺点没有插件，如果要定制模板只能懂一点go的语法 wordpress是动态的并且还需要托管数据库，所以托管费用比较昂贵 hugo是生成静态的页面，在本地生成后上传到服务器就可以了，托管费用非常便宜，可以直接用免费的github托管 hugo不可以在线编辑
wordpress vs hugo
Tables 静态/动态 托管 安全性 访问速度 在线编辑 markdown wordpress 动态 复杂 需要经常升级 快 可以 不支持 hugo 静态 简单 不需要打补丁 非常快 不可以 支持<div class=read-more-link><a href=/posts/hugo-entry-level-lesson/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/aws-saa-pass/>SAA-CO1考试之路</a> <time datetime=2019-10-03T10:30:37&#43;0800 class=post-date>Thu, Oct 3, 2019</time></ul>考试心得 考试成绩 852 背景 工作用到aws不到1年 有多年java开发经验 linux管理员,持有RHCE 准备周期 3周從準備到考試 每天8-12小时 做过实验的知识点列表 VPN endpoint/nat gateway/internet gateway/vpn/subnet/ACL RDS/Aurora/Reshift/Aurora/DynamoDB (snaphost copy az or cross region,ebs type change ,autoscaling ,entryption ,backup/replica ,Multi A-z,read/write unit)
Cloudfront (OAI,SSL certificat ,validation TTL ,pre-signed URL)
S3 (static websit ,ACL ,bucket policy,lifecyle)
ec2 (Cloudwath agent install,ebs mount/unmount,snapshot,elasticip binding)
Cloud53 (A/alias .routing policy)
Athena on S3 SQL QUERY<div class=read-more-link><a href=/posts/aws-saa-pass/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/aws-sap-passed/>aws sap passed</a> <time datetime=2019-10-02T10:40:37&#43;0800 class=post-date>Wed, Oct 2, 2019</time></ul>9.27 号考试通过了SAP（913分），心里终于落下一块石头.从开始准备到最后通过我用了数个星期的时间，平均每天超过10小时的准备.sap的难度比saa高不是一个级别的，涉及了大量的新的知识点.不仅仅需要知道每个知识点，还需要动手去实践，为此我写了20个几个blog都是尝试这里面的知识点，实际我做过的实验大概有40多个，几乎每天要做一个实验，因为时间的问题，没有把其他的整理到blog上来，也是一个遗憾，后面我会慢慢补充上来。 考前准备 aws 账号 ：做实验用 最好有一些linux/network/dev experience 最好熟悉一门编程语言,java/.net/python/ruby/go/nodejs 最好熟悉json/yaml 如果考过saa最好了，saa是非常基础的aws认证 如果考过saa，最好保证300小时以上的学习时间 考试内容准备 印度小哥的一个考试心得基本上面面俱到了 https://www.linkedin.com/pulse/preparing-aws-certified-solutions-architect-2019-sap-c01-agarwal/ bilibili 上印度小哥sap视频 https://www.bilibili.com/video/av66737718?from=search&amp;seid=1011549087963751322 如果听的懂建议听听
bilibili 上cloud guru的sap视频 https://www.bilibili.com/video/av39285864?from=search&amp;seid=1657200592137432769
aws 本上的get-started https://aws.amazon.com/getting-started/ 建议尝试里面大部分的实验内容，只有实验的多了才能够理解每个服务以及服务于服务之间的关联<ul class=listing><a href=https://clouda3.github.io/posts/>top</a> <time datetime=2019-10-01T16:10:12&#43;0800 class=post-date>Tue, Oct 1, 2019</time></ul><ul class=listing><a href=https://clouda3.github.io/posts/aws-x-ray/>aws x-ray</a> <time datetime=2019-09-12T12:40:37&#43;0800 class=post-date>Thu, Sep 12, 2019</time></ul>AWS X-Ray 可以帮助开发人员分析与调试分布式生产应用程序，例如使用微服务架构构建的应用程序。借助 X-Ray，您可以了解应用程序及其底层服务的执行方式，从而识别和排查导致性能问题和错误的根本原因。X-Ray 可在请求通过应用程序时提供请求的端到端视图，并展示应用程序底层组件的映射。您可以使用 X-Ray 分析开发和生产中的应用程序，从简单的三层应用程序到包含上千种服务的复杂微服务应用程序。
簡單來說，xray是用來追踪服務與服務之間鏈條，每個服務之間的請求內容，時間，參數等信息
用api-gateway 和 lambda 實驗 本文用到的例子是前面的博文: Aws cloudformation deploy lambda and apigateway 只需要額外做以下兩步 開啟api-gateway的x-ray,api gateway console-&gt; apis-&gt;spring-boot-lambda-&gt;stages-&gt;Prod-&gt;logs/tracing-&gt;enable x-ray tracing 開啟lambda的x-ray,functions-&gt;spring-boot-lambda-LambdaSpringBootFunction-7CK2QHXPRA6F-&gt;aws x-ray:active tracing
test x-ray:fire a request to api gateway
open x-ray console:service map:you will see a picture like below:<ul class=listing><a href=https://clouda3.github.io/posts/aws-migration/>accelerating aws migration</a> <time datetime=2019-09-10T14:40:37&#43;0800 class=post-date>Tue, Sep 10, 2019</time></ul>aws migration from OP to cloud這是aws最注重的部分，關於遷移技術，aws提供了各種各樣的工具，比如遷移數據庫(sts,dms),遷移workload（aws server migration service）,協助你計劃遷移收集信息的工具(aws application discovery service),track遷移進程的工具(migration hub),遷移海量數據的aws snowball or snowmobile,s3 acceleration, 加速數據傳輸的 dierct connect等等，從網絡到數據庫到文件，給你武裝到牙齒
以下是兩篇關於數據遷移的好文
https://medium.com/@awsontop/aws-cloud-migration-strategy-and-process-6ed38479735a
https://www.slideshare.net/AmazonWebServices/accelerating-your-portfolio-migration-to-aws-using-aws-migration-hub-ent321-reinvent-2017<ul class=listing><a href=https://clouda3.github.io/posts/aws-glue-athena-quicksight/>aws online analytical processing (or OLAP)</a> <time datetime=2019-09-10T14:40:37&#43;0800 class=post-date>Tue, Sep 10, 2019</time></ul>OLAP在線分析工具越來越來成熟，從開始的數據倉庫，到強大的elk，再到雲，比如aws的 gaq(glue-athena-quicksight)，當然aws也有elk在線服務
gaq vs elk,實際上是一類的產品，glue提供了crawler去爬去數據，類似 logstash，athena提供查詢工具類似elasticsearch ,quicksight 跟 kibana一樣ui.gaq是aws雲端的服務，沒有辦法部署在線下，elk既可以部署在op也可以部署在cloud上
這篇文章來自 https://medium.com/localz-engineering/serverless-big-data-start-here-aws-glue-athena-quicksite-4c70ecac9fe3
有一個圖片 實驗 cloudwatch agent 或者 application discovery agent 到ec2
cloud watch agent 或者 discovery agent sync log 到 s3
glue裡面創建crawler ，指定s3
glue裡面創建database 和table
athena 寫sql語句查詢想要的數據
如果想要類似kinana那樣可視化的工具，那麼需要付費quicksight
完<ul class=listing><a href=https://clouda3.github.io/posts/aws-difference-between-userpool-and-identitypool/>Difference between user pool and identity pool(Federated Identities)</a> <time datetime=2019-09-06T12:40:37&#43;0800 class=post-date>Fri, Sep 6, 2019</time></ul>剛開始使用cognito服務的時候特別讓人困惑，有user pool 和 identity pool(Federated Identities)，user pool裡面還有federation，federation裡面有identity provider. identity pool 裡面有autenticated provider裡面也有user pool ID! 納尼?這是什麼鬼? let&rsquo;s forget the connection between them user pool 簡單來說就是提供一個用戶驗證的服務，比如用戶自定義用戶，用fb,GOOGLE，twitter等賬戶登錄，登錄後獲取一個token，用戶的每次請求帶著這個token就可以了，用戶登錄後獲取的是你個人應用的resource! ,比如你自己做了一個網站，登錄後可以管理自己用戶，權限，圖片等等，你有權限去訪問這些資源 identity pool 也是提供一個用戶認證的服務，用戶可以在裡面設置aws 的role，也就說用戶登錄後得到的aws的resource 的訪問權限，比如你可以訪問s3.只是這個登錄可以跟 user pool提供的服務去綁定，也可以不用user pool的服務直接用 identity pool裡面的provider去對接，也就說，如果你有google的id也可以登錄後獲取aws resource 資源的訪問權限，這個是登錄後aws通過sts生成臨時credential 來做到的 summary user pool 只是負責authentication，沒有authorization，即便有也是用戶本身應用的服務 identity pool，既可以authentication，又可以authoriztion，授權的是aws的resource 上幾張圖 幾個非常有價值的link https://serverless-stack.com/chapters/cognito-user-pool-vs-identity-pool.html https://gorillalogic.com/blog/java-integration-with-amazon-cognito/<ul class=listing><a href=https://clouda3.github.io/posts/aws-cognito-sample/>Aws cognito sample</a> <time datetime=2019-09-06T10:40:37&#43;0800 class=post-date>Fri, Sep 6, 2019</time></ul>这是一个aws官方的文档，我认为最好的cognito的例子，如果理解这个sample，那么cognito就没有任何问题 https://aws.amazon.com/getting-started/projects/build-serverless-web-app-lambda-apigateway-s3-dynamodb-cognito/ 详解 廢話少說直接上圖 程序組成部分 - 靜態的代碼存放s3 - 動態的代碼存放lambda - 代碼的訪問入口通過api-gateway - 數據的存放時dynamoDB(程序登錄後有個點擊頁面位置生成的數據,與用戶驗證沒有太多關係) Cognito user pool 在user login 流程 - 用戶用用戶名+密碼(或mfa，這取決於cognito user pool的配置)請求登錄 - aws cognito user pool去驗證用戶 - 如果用戶通過驗證返回一個token - 下一次用戶用這個token來請求訪問 - aws cognito user pool 可以基本满足用户登录，如果涉及到权限可以跟自己数据进行绑定 - 这个例子里面特别要注意的是，api gateway 直接设置了 Authorizers ：里面可以指定cognito 来对用戶進行驗證，不用額外寫程序來驗證，也就說每次訪問一個服務/ride.html,api-getway通過Authorizers直接去用cognito去驗證用戶的token - 這個例子分了兩個步驟，第一個步驟是直接登錄，登錄後獲得一個toke - 第二步驟是用api-gateway 自動驗證用戶的登錄，也就是authentication<ul class=listing><a href=https://clouda3.github.io/posts/aws-cloudformation-lambda-apigateway/>Aws cloudformation deploy lambda and apigateway</a> <time datetime=2019-09-05T12:40:37&#43;0800 class=post-date>Thu, Sep 5, 2019</time></ul>用Cloudformation 来部署 java 的lambda 和api gateway,这里要用到spring-boot写java 代码，需要用到s3，存放lambda代码，需要创建lambda function和api agetway，还需要用到sam Aws lambda with Spring Boot 本文用到的git代码来自 https://github.com/gemerick/spring-boot-lambda 本文的内容来自 https://keyholesoftware.com/2018/04/26/aws-lambda-with-spring-boot/ 本文的步骤 安装sam git 克隆现有代码 创建s3 bucket 用cloudformation 上传 代码 用cloudformation 部署 测试代码 安装sam pip3 install --user aws-sam-cli git 克隆代码 git clone https://github.com/gemerick/spring-boot-lambda -b lambda mvn clean package 创建s3 bucket aws s3 mb s3://spring-boot-lambda-20100905 拷贝jar 到S3 ，更新sam的template aws cloudformation package --template-file sam.yaml --output-template-file target/output-sam.<div class=read-more-link><a href=/posts/aws-cloudformation-lambda-apigateway/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/aws-ecs-tutorial/>Aws ecs tutorial</a> <time datetime=2019-09-04T09:40:37&#43;0800 class=post-date>Wed, Sep 4, 2019</time></ul>Aws ecs 简单来说就是host docker container，跟K8S类似，如果用过k8s，那么ecs非常的好理解 本文主要按照 Gentle Introduction to How AWS ECS Works with Example Tutorial 搭建 关于ECS的专业的词汇 Task Definition ：实际就是要给launch configration,比如暴露端口号，用什么docker image，cpu 内存需要多少，运行docker 的command，环境变量
Task ：简单来说就是一个running instance
Service ：一组task
Cluster ：一组task 跑在一个或者多个 constainer 里面
Container Instance ：容器实例里面跑的是多个 task
按照此图搭建一组ecs的服务 创建一个ecs cluster 创建一个ecsServiceRole 创建Task Definition 创建elb和 target group 创建 service，里面只有一个task 检查运行情况 把service里面的task 改为4 创建一个ecs cluster 创建secrutiry group my-ecs-sg<div class=read-more-link><a href=/posts/aws-ecs-tutorial/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/aws-sct-dms-tutorial/>aws数据库迁移工具简介</a> <time datetime=2019-09-03T14:40:37&#43;0800 class=post-date>Tue, Sep 3, 2019</time></ul>Aws数据库迁移工具简介 越来越多的公司选择把服务迁移到云上,那么数据库的迁移尤其重要，亚马逊提供了数据迁移的工具 sct（schema converstion tool） 和 dms （data migration service）两个工具协作帮助客户从线下数据库导入到线上数据库,source 和 target 的database可以不是一种数据库类型，比如从mysql到oracle，或者mysql 到postgresql
简单介绍一下sct，简单点来说就是数据库schema转换工具，把本地的数据库的schema转换为aws线上目标数据库的schema，然后在线上导入这个schema生成数据库,然后用DMS帮你把数据导出到aws上
把aws mysql RDS 数据库 导出到 aws postgresql RDS 实验的目标就是把mysql数据库迁移到postgresql，由于在aws cloud上做比较方面，所以选择了都在云上来迁移做实验
Down load Aws schema convertion tool
create mysql database on aws
create database：test and table myclass with 2 column:id name
test id name 1 hello 2 kitty create postgresql database on aws
Open aws sct<div class=read-more-link><a href=/posts/aws-sct-dms-tutorial/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/aws-eni-can-not-be-deleted/>eni or eip can not be deleted</a> <time datetime=2019-09-02T14:40:37&#43;0800 class=post-date>Mon, Sep 2, 2019</time></ul>我几乎删除了所有的service，但是eni就是不让我删除 关联的eip也不让删除 我去aws社区看了很多帖子最后发现主要原因有两个地方 efs 使用eni nat gatway 使用了eni 根据这两点，我去查找，果然有个natgateway 使用eni，删除掉nat gateway后，eni可以删除，eip可以release了<ul class=listing><a href=https://clouda3.github.io/posts/aws-multi-eni-on-one-ec2-instance/>一个ec2 instance上配置多个eni</a> <time datetime=2019-09-02T08:40:37&#43;0800 class=post-date>Mon, Sep 2, 2019</time></ul>一个ec2 instance 配置多网卡 首先要确定你需要几个公网IP，以2个为例 首先要确定你需要几个网卡，以2个为例 申请两个 elastic ip：IP1 ip2 申请两个eni(network interface)：eni1，eni2 创建一个ec2 把ip1 绑定到eni1,elastic ip-&gt;选中IP-&gt;associate-&gt;resource type:network interface -&gt; private ip 自动选择 把ip2 绑定到eni2,此处省略步骤 把eni1绑定到ec2，network interface 页面-&gt;选择eni1-&gt;attach-&gt; 选择 ec2 instance id 把eni2绑定到ec2,此处省略步骤 在ec2 instance 页面,看到iP里面公网IP只有一个，private ip 有2个 为什么少了一个?用putty connnect 这个两个ip，都是没有问题，ec2 的console不显示而已
[ec2-user@ip-172-31-1-176 ~]$ ifconfig eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 9001 inet 172.31.1.176 netmask 255.255.255.0 broadcast 172.31.1.255 inet6 fe80::8a:93ff:fefd:ef5c prefixlen 64 scopeid 0x20&lt;link&gt; ether 02:8a:93:fd:ef:5c txqueuelen 1000 (Ethernet) RX packets 4115218 bytes 1170825027 (1.<div class=read-more-link><a href=/posts/aws-multi-eni-on-one-ec2-instance/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/aws-service-catalog/>service catalog 简介</a> <time datetime=2019-08-29T10:40:37&#43;0800 class=post-date>Thu, Aug 29, 2019</time></ul>Aws service catalog 简介 aws service catalog 从字面上看就是服务目录,也就是说一些服务放入一组，进行统一的规划，那里一些可以进行统一的规划呢？ 几个关键词 portfolio product constraint 傳統資源創建存在問題 從亞馬遜的blog上盜圖
上圖存在的幾個問題非常明顯
創建了一組資源，資源與資源之間無法互訪
EC2要訪問s3 ，那麼需要管理員授權
管理授權就要破壞兩個原則：service self-sufficient不滿足，最小權利原則(那就要定義允許ec2訪問s3的policy，所有的實例都可以訪問)
如何做到產品內部服務可以互訪，而產品外部的服務無權訪問呢？ 從亞馬遜的blog上盜圖
A和B是兩個portfolio ，組內可以互訪，但是A和B之間無法訪問
一個使用場景介紹 從亞馬遜的blog上盜圖
比如產品添加了一個s3-08的一個bucket，如果做到允許EC2_04訪問，而不允許其他產品或者本產品內部其他EC2訪問的呢？這就要用到 service catalog來解決
具體例子請看 (https://aws.amazon.com/blogs/mt/create-a-security-partition-for-your-applications-using-aws-service-catalog-and-aws-lambda/)<ul class=listing><a href=https://clouda3.github.io/posts/aws-infrastructure-as-code/>aws infrastructure as code</a> <time datetime=2019-08-29T08:30:37&#43;0800 class=post-date>Thu, Aug 29, 2019</time></ul><ul class=listing><a href=https://clouda3.github.io/posts/aws-sap-sts-service/>使用Aws sts创建临时credential</a> <time datetime=2019-08-26T08:30:37&#43;0800 class=post-date>Mon, Aug 26, 2019</time></ul>Aws sts 简介 简单来说就是aws通过sts服务生成临时的credential给用户使用，他们可以设置有效期，自动失效,这也是amazon best practice 里面建议的方式 实验准备 创建 User 创建 Role 创建 s3 作为测试 为User创建sts assumeRole 的访问策略 在EC2上使用Aws cli 创建 历史的credential 访问s3 Create an IAM user https://console.aws.amazon.com/iam/home?region=ap-southeast-1#/users input name： mystsuser access type programmatic access 其他保持默认 Create role for antoher aws account https://console.aws.amazon.com/iam/home?region=ap-southeast-1#/roles 选择：another aws account Account ID: 找到上面的user 的arn，XXX就是ID (arn:aws:iam::XXXX:user/mystsuser) Attach plicy 搜索s3，选择 AmanzonS3ReadOnlyAccess,next reviews and create Role，input role name：sts-s3-read-only 创建完毕后，Update/Modify Trust Relationships replace (this is the arn of the user what you created) with arn:aws:iam::XXXX:user/mystsuser<div class=read-more-link><a href=/posts/aws-sap-sts-service/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/aws-sap-system-manager/>使用Aws System Manager 统一管理 aws resource</a> <time datetime=2019-08-25T16:30:37&#43;0800 class=post-date>Sun, Aug 25, 2019</time></ul>使用Aws System Manager 统一管理 aws resource Aws system Manager 简介 AWS Systems Manager gives you visibility and control of your infrastructure on AWS. Systems Manager provides a unified use:qr interface so you can view operational data from multiple AWS services and allows you to automate operational tasks across your AWS resources
Aws system manager AWS 让您能够查看和控制 AWS 上的基础设施。Systems Manager 可以提供一个统一的用户界面，供您查看多种 AWS 服务的运行数据，并在 AWS 资源上自动执行操作任务。
使用场景 比如我有个20台 linux ec2，不管什么类型的，只要安装centyos，那么都要给他安装 ，cloudwatch agent 来对系统的disk和memory进行监控 实验的前置条件 你的系统上必须安装SSM Agent 你的EC2的role 必须具有 AmazonEC2RoleforSSM 的policy attach上去 安装SSM agent Intel (x86_64) 64 位实例： sudo yum install -y https://s3.<div class=read-more-link><a href=/posts/aws-sap-system-manager/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/aws-nat-instance-setup/>NAT instance setup 简介</a> <time datetime=2019-08-20T14:40:37&#43;0800 class=post-date>Tue, Aug 20, 2019</time></ul>AWS NAT instance setup 简介 NAT（Network Address Translation，网络地址转换）是1994年提出的。当在专用网内部的一些主机本来已经分配到了本地IP地址（即仅在本专用网内使用的专用地址），但现在又想和因特网上的主机通信（并不需要加密）时，可使用NAT方法。 AWS NAT gateway Aws 有專門的nat gateway,並且是HA的，只要創建gateway然後更改一下，subnet的路由就可以了，所以自己搭建一個nat gateway實際並不是aws的範疇，實際是一個linux系統的問題 手動搭建一個nat instance private subnet1/ instance1 / sg1(secrutiry group) / internal IP1 -&gt;local node1 public subnet2/ instance2 / sg2(sercirity group) / internal IP2 /public ip2 -&gt; proxy node2 配置proxy node vi /etc/sysctl.conf net.ipv4.ip_forward=1 iptables -t nat -A POSTROUTING -o eth0 -s 192.168.1.0/24 -j MASQUERADE 192.168.1.0/24 為本地網絡CIDR
EC2 頁面，選中proxy node2 -&gt;Action -&gt;Networking -&gt;Disable source/Desk Check<div class=read-more-link><a href=/posts/aws-nat-instance-setup/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/why-do-we-need-k8s/>我们为什么需要K8S</a> <time datetime=2019-05-03T10:30:37&#43;0800 class=post-date>Fri, May 3, 2019</time></ul>我们为什么需要K8S 我们用最常用的一个例子LAMP（Linux/Apache/Mysql/PHP or Python or perl）搭建一個負載均均衡的多節點的網站，假如不考慮mysql環節，我們只考慮負載均衡和多節點的問題。
1：如果我们在本地数据中心进行产品部署的话,我们需要那些服务 负载均衡 LB 扩容和缩放 auto scaling 高可用 HA，一個節點挂掉，如果有新的節點自動產生take over他的服務 日志如何同步到一個中心? Docker部署或者裸程序 反向代理服務 那么问题来了，几乎所有的服务都需要我们自己部署和搭建，我们的基础设施，完全依赖裸的操作系统，我们要全部搭建，举几个最简单的例子：如何决定部署多少个Docker容器？如何让这些容器的服务负载均衡？每个容器里面的日志如何同步？任何一个docker容器服务挂掉该如何处理？ 我们操作系统的优化，硬件和网络高可用性，等等目前这些问题都需要我们在本地数据中心来实现，无论是复杂度还是需要硬件成本和技术都是非常高的。
2：如果在aws云上我们使用服务 LB(health check等配置) autoscaling cloudwatch logs 创建Lauch configuration 创建image 里面包含我们应用程序或者包含docker 日志的同步可以同步到elasticsearch服務 反向代理(使用lb的或者image裏面自己搭建nginx根據需要) 我们发现如果我们使用aws来构建我们的服务的话，这里面有很多成熟的服务我们可以拿来使用，这里面我们需要完成各个服务的配置，如果我们使用alicloud或者azure等各个服务平台的配置都是不一样的，即便我们有devops，我们使用terraform和assible来做devops也需要很多不同的代码，跨平台的移植非常麻煩
3. 使用K8s 是否需要負載均衡？是，k8s service本身就是負載均衡 是否需要考慮需要節點的擴容和縮放？是，K8s pod本身就支持autoscaling擴容和縮放 日志如何同步？可以直接使用K8s的存儲管理，可以不用第三方的服務 是否支持容器？一直都是以容器為基本單位就行部署的 系統的可移植性如何?你的程序無論在本地數據中心的K8S還是在各個云服務平臺的k8s上，devops的代碼的改動幾乎沒有多少，完全是跨平臺的。無論是開發者還是devops都可以聚焦於你的業務實現 6.反向代理，直接使用service ingress 就可以很容易解決 總之，k8S提供了你需要的完美的一體化的解決方案，所有的這些服務都集成在K8S内部，如果使用一些定制化的k8S平臺，比如openshit還集成了更多的開發和devops的工具在裏面，可以更快的開發和測試和部署，讓我們的用戶效率大大提高。<ul class=listing><a href=https://clouda3.github.io/posts/aws-secutirygroup-networkacl/>security group vs network acl</a> <time datetime=2019-02-26T12:40:37&#43;0800 class=post-date>Tue, Feb 26, 2019</time></ul>Difference between Security Groups and Network Access Control List (NACL) Scope Network ACLs are applicable at the subnet level, so any instance in the subnet with an associated NACL will follow rules of NACL
Security groups has to be assigned explicitly to the instance. This means any instances within the subnet group gets the rule applied.
State: Stateful or Stateless Security groups are stateful.If you allow an incoming port 80,the outgoing port will be automatically opened Network ACLs are stateless .<div class=read-more-link><a href=/posts/aws-secutirygroup-networkacl/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/jenkins_create_new_node/>如何配置jenkins新节点</a> <time datetime=2018-10-13T10:40:37&#43;0800 class=post-date>Sat, Oct 13, 2018</time></ul>jenkins 节点 简介 在企业里面使用Jenkins自动部署时，大部分企业更新发布几个软件版本,但是对于一些公司有非常多的业务线或者产品来说，Jenkins就需要同时处理很多的任务，这时候就需要借助Jenkins多个node或者我们所说的Jenkins分布式SLAVE节点，来分开处理多个产品或者业务线的部署，目的就是master节点用来分配任务，slave节点来具体执行部署任务 配置 slave节点 jenkins -&gt;manage jenins -&gt; manage node and cloud -&gt;new node node name:test ,选择permanent node 填好number of executors:1 ,remote root,launch method:launch agent via ssh,Host,Credentials, Host Key Verification Strategy,known hosts file verification strategy ,availability:keep agent online as much as possible 在slave上安装各种需要软件 一定要安装相关的plugin和global tool configuration里面配置相关的工具软件 e 创建一个pipeline测试一下
pipeline { agent any stages { stage('Example') { steps { echo 'Hello World' } } } post { always { echo 'I will .<div class=read-more-link><a href=/posts/jenkins_create_new_node/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/interview_questions/>面试问题集合</a> <time datetime=2018-07-28T12:40:37&#43;0800 class=post-date>Sat, Jul 28, 2018</time></ul>面试问题结合 为什么要使用Kafka在你们项目 使用什么方式来解决微服务的事务问题Seata 支持多种事物框架 如有大量的并发 HTTP 请求到同一个API如何设计 连接池，keep-alive,socket-timeout,connect-time等设置 如何保证一个高并发的程序能够很好的服务用户，该怎么设计 如何劝说客户迁移到云 K8s能给企业带来什么 如何设计一个websocket客户端的高可用 你为什么觉得你适合这个职位 你对你的职业生涯有什么规划 英文中文的自我介绍 为什么要使用elasticsearch 为什么要使用云服务 mysql索引为什么可以提高速度，elasticsearch倒排索引原理 java 查看jvm一些命令jstack jstat jmap mariadb和mysqldb区别 Solution architect Enterprise architect technical architect 区别 作为一个云架构师你要考哪些stakeholder的诉求 作为一个架构师需要哪些能力 什么是蓝绿发布/灰度发布/滚动发布 RTO RPO aws 混合云网络构建，AWS VPC网络如何通信 aws 私有云在公有云上备份 aws 异地多活.https://aws.amazon.com/cn/blogs/china/corporate-cloud-travel-hybrid-cloud-construction-and-common-cloud-application-scenarios/ 如何设计一个高并发的大数据处理系统，模块解耦，分布式处理，数据的分片和副本，流数据，网络设计和搭建，日志的处理 如果在咨詢行業我們我們處理不同行業客戶的產品的架構，我們怎麽才可以做好這樣的工作<ul class=listing><a href=https://clouda3.github.io/posts/k8s-install-ingress/>k8s使用ingress总结</a> <time datetime=2018-05-03T10:30:37&#43;0800 class=post-date>Thu, May 3, 2018</time></ul>安装准备 Centos7.7 vm 或者真实的物理机三台(master一台,node两台) 硬件要求2GB ram,最低2CPU，最少32GB 硬盘 节点之间最好网络互通，如果不考虑安全可以关闭firewalld 可以访问到外部网络,因为需要网络资源，比如yum源和其他k8s需要的yaml文件 需要安装和配置 yum源配置 防火墙selinux的关闭与配置 swap分区配置 桥接ipv4流量交给iptables 文件句柄数的限制 Docker的安装 Kubeadmin,flannel 创建deployment,service,pod,ingress,ingress controller,kubernets-dashboard 具体安装步骤 VM 网络选择bridge模式 master:192.168.25.200 node:192.168.25.187&frasl;192.168.25.188
防火墙
$ systemctl stop firewalld $ systemctl disable firewalld Selinux
$ sed -i &quot;s/^SELINUX=enforcing/SELINUX=disabled/g&quot; /etc/selinux/config $ sed -i &quot;s/^SELINUX=permissive/SELINUX=disabled/g&quot; /etc/selinux/config $ setenforce 0 关闭swap
swapoff -a sed -i 's/.*swap.*/#&amp;/' /etc/fstab 网络转发
cat &gt; /etc/sysctl.d/k8s.conf &lt;&lt; EOF net.<div class=read-more-link><a href=/posts/k8s-install-ingress/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/bare-metal-server/>裸金属服务器使用</a> <time datetime=2017-09-06T10:40:37&#43;0800 class=post-date>Wed, Sep 6, 2017</time></ul>什么裸金属服务器 裸金属服务器（Bare Metal Server，BMS）是一款兼具弹性云服务器和物理机性能的计算类服务，为您和您的企业提供专属的云上物理服务器，为核心数据库、关键应用系统、高性能计算、大数据等业务提供卓越的计算性能以及数据安全。租户可灵活申请，按需使用。 裸金属服务器的开通是自助完成的，您只需要指定具体的服务器类型、镜像、所需要的网络配置等，即可在短时间内获得所需的裸金属服务器。服务器供应、运维工作交由华为云，您可以专注于业务创新。 产品架构 裸金属服务器在不同可用区中部署（可用区之间通过内网连接），部分可用区发生故障后不会影响同一区域内的其他可用区。 可以通过虚拟私有云建立专属的网络环境，设置子网、安全组，并通过弹性公网IP实现外网链接（需带宽支持）。 通过镜像服务，可以对裸金属服务器安装镜像，也可以通过私有镜像批量创建裸金属服务器，实现快速的业务部署。 通过云硬盘服务实现数据存储，并通过云硬盘备份服务实现数据的备份和恢复。 云监控是保持裸金属服务器可靠性、可用性和性能的重要部分，通过云监控，用户可以观察裸金属服务器资源。 云备份提供对云硬盘和裸金属服务器的备份保护服务，支持基于快照技术的备份服务，并支持利用备份数据恢复服务器和磁盘的数据。 华为裸金属的服务器的架构 与物理机和虚拟机的对比 什么场景下使用裸金属服务器 裸金属服务与一般云服务器最大的区别是是虚拟化与非虚拟化，虚拟化的缺点就是性能损失，操作系统和应用程序在调用硬件资源的时候，没有直接掌控，而是通过虚拟化软件间接管理的。 - 高安全性和法规要求 - 高性能计算场景 - 资源独占的场景
不同厂家的裸金属服务器的服务差别 有很多小厂的裸金属服务器，说实话就是一台独立主机，独立的独享宽带的网络（可以定制宽带），但是网络无法定制，比如没有VPC的选项，没有安全组，要自己通过防火墙软件管安全，也没有网络硬盘，说白了就是一台独立的远程主机。阿里云华为云这些已经非常成熟了，跟网络主机的区别不是太大，区别就是一个非虚拟化的主机而已，其他的地方基本上区别不大。<ul class=listing><a href=https://clouda3.github.io/posts/firewalld-block-docker/>裸金属服务器遇到的docker容器访问问题</a> <time datetime=2017-09-06T10:40:37&#43;0800 class=post-date>Wed, Sep 6, 2017</time></ul>问题描述 我们本地数据中心服务器处理与客户的接口的时候发现网络有严重的延迟，然后我们又有数据合规方面的问题，我们就采用云端的裸金属服务器，安装了docker后发现docker无法访问到主机。 问题发现 docker exec -ti docker-id bash 进入主机 在docker主机内部telnet 主机IP 端口 发现无法访问 退出虚拟主机在主机执行telnet 主机IP 端口 ，是可以访问的 检查网络 原来是docker0 与主机eth0 之间通信问题被firewall屏蔽了
firewall-cmd --permanent --add-rich-rule=&quot;rule family=&quot;ipv4&quot; source address=&quot;172.17.0.1/16&quot; accept&quot; firewall-cmd --reload<ul class=listing><a href=https://clouda3.github.io/posts/jdk-version-caused-dynamic-proxy-issue/>JDk版本問題造成的cglib運行時候出錯</a> <time datetime=2017-08-29T10:40:37&#43;0800 class=post-date>Tue, Aug 29, 2017</time></ul>異常信息 Caused by: java.lang.ExceptionInInitializerError: null at org.springframework.context.annotation.ConfigurationClassEnhancer.newEnhancer(ConfigurationClassEnhancer.java:122) ~[spring-context-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.context.annotation.ConfigurationClassEnhancer.enhance(ConfigurationClassEnhancer.java:110) ~[spring-context-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:405) ~[spring-context-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] ... 20 common frames omitted Caused by: org.springframework.cglib.core.CodeGenerationException: java.lang.reflect.InaccessibleObjectException--&gt;Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @1134affc at org.springframework.cglib.core.ReflectUtils.defineClass(ReflectUtils.java:464) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.AbstractClassGenerator.generate(AbstractClassGenerator.java:336) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:93) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData$3.apply(AbstractClassGenerator.java:91) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.internal.LoadingCache$2.call(LoadingCache.java:54) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na] at org.springframework.cglib.core.internal.LoadingCache.createEntry(LoadingCache.java:61) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.internal.LoadingCache.get(LoadingCache.java:34) ~[spring-core-5.0.4.RELEASE.jar!/:5.0.4.RELEASE] at org.springframework.cglib.core.AbstractClassGenerator$ClassLoaderData.get(AbstractClassGenerator.java:116) ~[spring-core-5.<div class=read-more-link><a href=/posts/jdk-version-caused-dynamic-proxy-issue/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/linux-tcp-udp-port-test/>如何测试linux的tcp和udp端口</a> <time datetime=2017-06-02T12:40:37&#43;0800 class=post-date>Fri, Jun 2, 2017</time></ul>如何测试linux的tcp和udp端口 测试tcp 一般用使用 telnet
telnet 192.168.12.10 22 telnet 不支持udp协议，所以我们可以使用nc,nc可以支持tcp也可以支持udp
yum install -y nc nc -z -v 192.168.10.12 22 #tcp nc -z -v -u 192.168.10.12 123 # udp<ul class=listing><a href=https://clouda3.github.io/posts/why-epel/>为什么要使用epel</a> <time datetime=2017-05-22T10:30:37&#43;0800 class=post-date>Mon, May 22, 2017</time></ul>Linux 安装包的痛苦经历 libcurl.so: libssh2.so.1: cannot open shared object file: No such file or directory libssl.so.10: cannot open shared object file: No such file or directory 如果遇到以上以上情况，libcurl需要libssh2依赖，那我们最希望的最法无非是yum install libssh2 libssl希望能安装好，那就解决了依赖的问题了，但是问题是没有
Last metadata expiration check: 2:33:40 ago on 18 Mar 2019 02:09:36 PM CST. No match for argument: libssh2 Error: Unable to find a match: libssh2 遇到这样的问题我们一般会去找一个rpm包去安装，通过rpm -ivh libssh2.rpm 发现缺少依赖
Requires libc.so.6()(64bit) libc.so.6(GLIBC_2.14)(64bit) libc.so.6(GLIBC_2.2.5)(64bit) libc.so.6(GLIBC_2.3)(64bit) libc.so.6(GLIBC_2.3.4)(64bit) libc.so.6(GLIBC_2.4)(64bit) libcrypto.so.3()(64bit) libcrypto.so.3(OPENSSL_3.0.0)(64bit) libssl.<div class=read-more-link><a href=/posts/why-epel/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/linux-openvpn-install/>Openvpn最简单的安装方式</a> <time datetime=2017-05-08T12:30:37&#43;0800 class=post-date>Mon, May 8, 2017</time></ul>为什么会用到vpn vpn是我们经常会用到的工具，比如有些程序不允许我们在某些地区下载，有些网站我们没有办法看之类的，我们就vpn不管是pptp还是vpn无非改变都是路由问题，也就是你上网的出口的问题 openvpn openvpn是一款开源vpn软件，功能非常强大，用户非常多，遵循的是openvpn协议 缺点搭建有些复杂，但是有第三方的脚本协助搭建会非常简单
openvpn搭建借助于第三方脚本 作者git：https://github.com/Nyr/openvpn-install
wget https://git.io/vpn -O openvpn-install.sh &amp;&amp; bash openvpn-install.sh 最后生成一个*.ovpn文件
下载并安装openvpn gui：https://openvpn.net/community-downloads/
用安装好的客户端打开*.ovpn就可以登录远程的vpn服务器了<ul class=listing><a href=https://clouda3.github.io/posts/pythyon_collection/>python一些集合</a> <time datetime=2017-05-04T10:30:37&#43;0800 class=post-date>Thu, May 4, 2017</time></ul>Python 面試題目 列表（list）和元组（tuple）有什么区别？
列表是可变的。创建后可以对其进行修改 元组是不可变的。元组一旦创建，就不能对其进行更改 列表表示的是顺序。它们是有序序列，通常是同一类型的对象 [&ldquo;APPLE&rdquo;,&ldquo;PEAR&rdquo;,&ldquo;ORANGE&rdquo;] 元组表示的是结构。可以用来存储不同数据类型的元素 [1,&ldquo;eric&rdquo;,1999-08-10,24] 什么是装饰器（decorator）
解释Range函数
解释map函数的工作原理
解释reduce函数的工作原理。
解释filter函数的工作原理
Python是按引用调用还是按值调用？
列表乘法是如何工作的?
类中的“self”指的是什么？
如何在Python中连接列表？
列表和数组有什么区别？ list vs array
Pandas
举出几个可变和不可变对象的例子
模块（module）和包（package）有什么区别？
在迭代序列时，为什么要使用enumerate？
pass、continue和break之间有什么区别?
如何将for循环转换为使用递推式构造列表（list comprehension）？
Python中的异常处理是如何进行的？
什么是init?init是Python中的方法或者结构。
什么是lambda函数？
Python中的self是什么？self是类的实例或对象。
Python中的函数方法是什么？
python中是否需要缩进？
python是否区分大小写？
Python中的局部变量和全局变量是什么？
什么是python模块？Python中有哪些常用的内置模块？
Python中的命名空间是什么？
如何在Python中管理内存？<div class=read-more-link><a href=/posts/pythyon_collection/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/ansible-devops-tools/>Ansible简介</a> <time datetime=2017-03-06T11:40:00&#43;0800 class=post-date>Mon, Mar 6, 2017</time></ul>Ansible 简介 ansible是基于Python开发，集合了众多运维工具（puppet、chef）的优点，实现了批量系统配置、批量程序部署、批量运行命令等功能。最大的特点就是ansible不需要在远程主机上安装client/agents，因为它们是基于ssh来和远程主机通讯的。ansible目前已经已经被红帽官方收购，是自动化运维工具中大家认可度最高的，并且上手容易，学习简单。是每位运维工程师必须掌握的技能之一。 ## 特点 ##
部署简单，只需在主控端部署Ansible环境，被控端无需做任何操作； 默认使用SSH协议对设备进行管理； 有大量常规运维操作模块，可实现日常绝大部分操作； 配置简单、功能强大、扩展性强； 支持API及自定义模块，可通过Python轻松扩展； 通过Playbooks来定制强大的配置、状态管理； 轻量级，无需在客户端安装agent，更新时，只需在操作机上进行一次更新即可； 提供一个功能强大、操作性强的Web管理界面和REST API接口——AWX平台。 任务执行方式 ad-hoc模式(点对点模式)
使用单个模块，支持批量执行单条命令。ad-hoc 命令是一种可以快速输入的命令，而且不需要保存起来的命令。就相当于bash中的一句话shell。
playbook模式
是Ansible主要管理方式，也是Ansible功能强大的关键所在。playbook通过多个task集合完成一类功能.比如我们拷贝一个文件到主机，然后授予权限，然后启动程序这几个步骤结合在一起
Aansbile 文件和命令 ansible.cfg
inventory = /etc/ansible/hosts #这个参数表示资源清单inventory文件的位置 library = /usr/share/ansible #指向存放Ansible模块的目录，支持多个目录方式，只要用冒号（：）隔开就可以 forks = 5 #并发连接数，默认为5 sudo_user = root #设置默认执行命令的用户 remote_port = 22 #指定连接被管节点的管理端口，默认为22端口，建议修改，能够更加安全 host_key_checking = False #设置是否检查SSH主机的密钥，值为True/False。关闭后第一次连接不会提示配置实例 timeout = 60 #设置SSH连接的超时时间，单位为秒 log_path = /var/log/ansible.log #指定一个存储ansible日志的文件（默认不记录日志） inventory 文件
不分组<div class=read-more-link><a href=/posts/ansible-devops-tools/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/linux-file-max-open/>linux最大文件打开数</a> <time datetime=2016-05-07T10:30:37&#43;0800 class=post-date>Sat, May 7, 2016</time></ul>文件最大打开数 如果服务器提供TCP服务（TCP层或者HTTP层），在并发访问量持续很高时，容易产生too many open files错误。这时查看netstat可以发现很多TIME_WAIT状态的链接，这说明大量链接处于半开状态，已经完成了请求响应，然后进行下一步操作，如果句柄数(文件打开数)超过了阈值，那就只能等待或者出错 解决方案 系统内核的修改
cat /proc/sys/fs/file-max sysctl -a sysctl -p 每个用户级别的修改
ulimit -n 1024000 (临时修改) vim /etc/security/limits.conf * soft nofile 2048 * hard nofile 2048 如果阿里云或者aws云里面的centos都是被优化过的，默认的1024都被修改成了65536了，所以对于大部分人来说足够用了<ul class=listing><a href=https://clouda3.github.io/posts/linux-tree/>linux的tree命令</a> <time datetime=2016-05-06T10:30:37&#43;0800 class=post-date>Fri, May 6, 2016</time></ul>linux tree command Centos 是默认不带tree 命令的，如果要使用首先要install tree command
yum install -y tree 使用tree 显示目录的深度为2级
tree -L 2 . ├── easy-rsa-old-2.3.3 │ ├── configure.ac │ ├── COPYING │ ├── COPYRIGHT.GPL │ ├── distro │ ├── doc │ ├── easy-rsa │ └── Makefile.am ├── frgs.log ├── frp_0.32.1_linux_amd64 │ ├── frgs.log │ ├── frpc │ ├── frpc_full.ini │ ├── frpc.ini │ ├── frps │ ├── frps_full.ini │ ├── frps.ini │ ├── frps.<div class=read-more-link><a href=/posts/linux-tree/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/pptp-client/>vpn客户端工具pptp介绍</a> <time datetime=2016-05-04T10:30:37&#43;0800 class=post-date>Wed, May 4, 2016</time></ul>pptp 安装 yum install ppp pptp pptp-setup -y
创建 链接文件 /etc/ppp/peers/pptp
pty &quot;pptp 039.9966.org --nolaunchpppd --debug&quot; name hk789 password ff800800 remotename PPTP require-mppe-128 require-mschap-v2 refuse-eap refuse-pap refuse-chap refuse-mschap noauth debug persist maxfail 0 defaultroute #replacedefaultroute #usepeerdns 执行命令 modprobe nf_conntrack_pptp pppd call pptp<ul class=listing><a href=https://clouda3.github.io/posts/linux-lvm-resize/>lvm空间扩容</a> <time datetime=2016-04-20T10:30:37&#43;0800 class=post-date>Wed, Apr 20, 2016</time></ul>[root@localhost ~]# df -H Filesystem Size Used Avail Use% Mounted on devtmpfs 17G 0 17G 0% /dev tmpfs 17G 0 17G 0% /dev/shm tmpfs 17G 9.1M 17G 1% /run tmpfs 17G 0 17G 0% /sys/fs/cgroup /dev/mapper/centos-root 54G 1.4G 53G 3% / /dev/sda2 1.1G 148M 916M 14% /boot /dev/sda1 210M 12M 198M 6% /boot/efi /dev/mapper/centos-home 12T 35M 12T 1% /home tmpfs 3.4G 0 3.4G 0% /run/user/0 分区不够合理 root 下面空间不够用
umount /home lvreduce -L 5T /dev/mapper/centos-home lvextend -L +5T /dev/mapper/centos-root xfs_growfs /dev/mapper/centos-root mkfs.<div class=read-more-link><a href=/posts/linux-lvm-resize/>Read More…</a></div><ul class=listing><a href=https://clouda3.github.io/posts/linux-key-gen/>centos使用ssh-key免密登录</a> <time datetime=2016-04-03T10:30:37&#43;0800 class=post-date>Sun, Apr 3, 2016</time></ul>centos ssh login 免密码登录 修改linux主机sshd配置
vi /etc/ssh/sshd_config RSAAuthentication yes PubkeyAuthentication yes AuthorizedKeysFile .ssh/authorized_keys /sbin/service sshd restart 生成密钥,包括 id_rsa私钥，id_rsa.pub公钥
ssh-keygen -t rsa 更改文件名
mv ~/.ssh/id_rsa.pub ~/.ssh/authorized_keys 拷贝id_rsa文件内容到任何一个linux客户端,remote.pem,使用ssh登录
ssh -i remote.pem user@host<ul class=listing><a href=https://clouda3.github.io/posts/jvm-optimize-related/>jvm参数优化</a> <time datetime=2015-06-26T12:40:37&#43;0800 class=post-date>Fri, Jun 26, 2015</time></ul>相关链接 https://blog.csdn.net/lingbo229/article/details/82586822 https://www.iteye.com/blog/kakaluyi-774227 https://blog.csdn.net/qq_44831907/article/details/113342146 https://www.cnblogs.com/jpfss/p/11050411.html<ul class=listing><a href=https://clouda3.github.io/posts/jenkins-devops-tools/>jenkins简介</a> <time datetime=2015-05-06T11:40:00&#43;0800 class=post-date>Wed, May 6, 2015</time></ul>什么是CI和CD CI(Continuous integration，中文意思是持续集成)/ CD(Continuous Delivery， 中文意思持续交付) CI/CD 是一种通过在应用开发阶段引入自动化来频繁向客户交付应用的方法。 CI/CD 的核心概念是持续集成、持续交付和持续部署。它是作为一个面向开发和运营团队的解决方案，主要针对在集成新代码时所引发的问题（也称为：“集成地狱”）。 CI/CD 可让持续自动化和持续监控贯穿于应用的整个生命周期（从集成和测试阶段，到交付和部署）。 jenkins简介 Jenkins是一个开源的、提供友好操作界面的持续集成(CI)工具，起源于Hudson（Hudson是商用的），主要用于持续、自动的构建/测试软件项目、监控外部任务的运行（这个比较抽象，暂且写上，不做解释）。Jenkins用Java语言编写，可在Tomcat等流行的servlet容器中运行，也可独立运行。通常与版本管理工具(SCM)、构建工具结合使用。可集成使用版本控制工具有SVN、GIT，以及构建工具有Maven、Ant、Gradle。 特点 易于安装-只要把jenkins.war部署到servlet容器，不需要数据库支持 易于配置-所有配置都是通过其提供的web界面实现； 有大量的插件可以配置使用,比如email通知结果,git,maven 附带了很多其他的功能比如用户密码的加密 可以支持备份,迁移,升级 还可以通过完全编程的方式Jenkinsfile,devops来实现纯代码的方式完全CI/CD 可以支持分布式的多个slave agent 可以保存每次build日志方便查阅 CI/CD 优势 1. 持续集成中的任何一个环节都是自动完成的，无需太多的人工干预，有利于减少重复过程以节省时间、费用和工作量 2. 持续集成保障了每个时间点上团队成员提交的代码是能成功集成的。换言之，任何时间点都能第一时间发现软件的集成问题，使任意时间发布可部署的软件成为了可能 3. CI/CD 具有高度的自动化 就是减少人工操作的事务，可以通过预先准备的脚本一次性运行，是我们内部或者外部用户，得到用户对于新版本的快速反馈，并且可以迅速处理任何明显的缺陷. 放几张图</div><footer id=footer><div class=container>&copy; 2023 <a href=https://clouda3.github.io/>云端的blog By </a>.
Powered by <a rel="nofollow noreferer noopener" href=https://gohugo.io target=_blank>Hugo</a>.</div></footer><a id=rocket href=#top></a><script type=text/javascript src="/js/totop.js?v=0.0.0" async></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-153597822-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-153597822-1');</script></body></html>